\documentclass[a4paper,parskip=half,numbers=enddot, DIV=12]{scrreprt}
\usepackage[utf8]{inputenc}

\usepackage{../header}
\usepackage{../frankenumbering}
\usepackage{../shortcuts}

\usepackage{csquotes}
\usepackage[backend=biber,style=numeric,sorting=none]{biblatex}
\addbibresource{../literatur.bib}

% Title Page
\title{Algebraic Geometry I}
\author{Nicholas Schwab \& Ferdinand Wagner}
\date{Wintersemester 2017/18}

\widowpenalty=10000
\clubpenalty=10000

\begin{document}
\pagenumbering{Alph}
\maketitle
\pagenumbering{roman}

\thispagestyle{plain}
This text consists of notes on the lecture Algebraic Geometry I, taught at the University of Bonn by Professor Jens Franke in the winter term (Wintersemester) 2017/18. 

Please report bugs, typos etc. through the \emph{Issues} feature of github.

\tableofcontents

\addchap{Introduction}
\pagenumbering{arabic}
The lecture will be an introduction to the language of \emph{schemes}. The topics include but are not limited to the category of (pre-)schemes, properties of schemes, morphisms of schemes, sheaves of $\Oo_X$-modules and cohomology of quasi-coherent sheaves.

Professor Franke said the lecture requires a firm knowledge of commutative algebra and affine and projective varieties. If you are not familiar with this terms you may want to think again about visiting this lecture. If you want to brush up your knowledge about these topics the following literature is recommended:
\begin{itemize}
 \item Matsumura, H.: \emph{Commutative Ring Theory},
 \item Hartshorne, R.: \emph{Algebraic Geometry},
 \item Mumford, D.: \emph{The Red Book of Varieties and Schemes},
 \item Schwab, N. \& Wagner, F.: \href{https://github.com/Nicholas42/AlgebraFranke/tree/master/AlgebraI}{\emph{Algebra I by Jens Franke}} \cite{alg1}. \textbf{Warning!} Somewhere in the middle of this text, the term \emph{irreducible} is redefined as irreducible \emph{and closed}. So don't let yourself get confused.
\end{itemize}
Let it be said that the first three recommendations are from Professor Franke while the last one is from the (not so) humble authors of these notes.

\chapter{Varieties and Schemes}\lbl{ch:varietiesAndSchemes}
\section{Introductory definitions}
\begin{defi}[sheaf and presheaf]\lbl{def:preSheaf}
    A \defemph{presheaf $\Ff$ of rings} on a topological space $X$ associates 
    \begin{itemize}
    	\item to any open subset $U\subseteq X$ a ring $\Ff(U)$ called the \emph{ring of sections} of $\Ff$ on $U$
    	\item and to any inclusion of open subsets $V\subseteq U$ a ring homomorphism 
    	\begin{align*}
	    	(-)|_V\colon \Ff(U) &\longto \Ff(V)
    	\end{align*}
    	such that $f|_V = f$ for all $f\in\Ff(V)$ and $(f|_V)|_W = f|_W$ for any inclusion $W\subseteq V\subseteq U$ of open subsets.
    \end{itemize}  Note that while this notation (intentionally) reminds of the restriction of functions, behaves similarly and often the restriction is indeed used for this homomorphism, the elements of the rings $\Ff(U)$ are not always functions. 
    
    A so defined presheaf is furthermore a \defemph{sheaf} if additionally, the following condition, called \emph{sheaf axiom}, holds:
    \begin{quote}\lbl{sheafAxiom}
     For every open covering $U = \bigcup_{i\in I} U_i$ of an open subset $U\subseteq X$ the map
        \begin{align*}
			\Ff(U) &\longto \left\{(f_i)_{i\in I}\in \prod_{i\in I} \Ff (U_i)\st f_i|_{U_i\cap U_j} = f_j|_{U_i\cap U_j} \text{ for }i,j\in I\right\}\\
			f &\longmapsto \left(f|_{U_i}\right)_{i\in I}
        \end{align*}
        is bijective. 
    \end{quote}
\end{defi}

\begin{rem}
    When $U=\emptyset$ one can take $I=\emptyset$ and obtains $\Ff(\emptyset) = \{0\}$.
\end{rem}
\begin{rem}
    Sheaves of groups, sets, etc. are defined in a similar way. A sheaf of rings $\Rr$ on $X$ defines two sheaves of groups on $X$, namely $U\mapsto (\Rr(U), +)$ and $U\mapsto (\Rr(U)^\times, \cdot)$.
\end{rem}
\begin{rem}
    Elements of $\Rr(U)$ are called \emph{sections}, elements of $\Rr(X)$ are called \emph{global sections}.
\end{rem}
\begin{example}
	    Let $R$ be a ring. The sheaf $\Ff_X$ of $R$-valued functions on $X$ associates to any open subset $U\subseteq X$ the ring of $R$-valued functions $f\colon U \to R$ with the inclusion morphism being the restriction of functions to subsets.
\end{example}
\begin{rem*}
	  If $\Gg$ is any (pre)sheaf on $X$ and $U\subseteq X$ an open subset, we get a a sheaf $\Gg|_U$ on $U$ by $\Gg|_U(V) = \Gg(V)$ for the open subsets $V\subseteq U$ equipped with the same restriction morphisms.
\end{rem*}
\begin{defi}[algebraic prevarieties] \lbl{def:preVarieties}
	    Let $k$ be an algebraically closed field. An \defemph{algebraic prevariety} over $k$ is a pair $(X,\Oo_X)$, where $X$ is an irreducible Noetherian topological space together with a sheaf $\Oo_X$ of rings on $X$ such that the following property is satisfied.
	    \begin{quote}
	        Any $x\in X$ has an open neighbourhood $U$ such that there is a homeomorphism $U\isomorphism[\phi] V$ where $V\subseteq k^n$ is a Zariski-closed subset such that $\phi$ identifies $\Oo_X|_U$ with the structure sheaf $\Oo_V$ of $V$. That is, if $W \subseteq V$ is open then any $k$-valued function $f\colon W\to k$ is regular (i.e. an element of $\Oo_V(W)$) if and only if 
	        \begin{align*}
	            g\colon \phi^{-1}(W) &\longto k\\
	            x&\longmapsto f(\phi(x))
	        \end{align*}
	        is an element of $\Oo_X(\phi^{-1}(W))$. One denotes $g=\phi^*f$ in this case.
	    \end{quote}
	    A \defemph{morphism of prevarieties} $(X,\Oo_X) \to (Y,\Oo_Y)$ is a continous map $X\morphism[\phi] Y$ such that for all $U\subseteq Y$ and $\lambda \in \Oo_Y(U)$ we have $\phi^\ast \lambda \in \Oo_X(\phi^{-1}(U))$. As above, $\phi^\ast\lambda$ is defined as $(\phi^\ast\lambda)(x) = \lambda(\phi(x))$. In particular, $\phi^*$ induces a \emph{morphism of sheaves} $\phi^*\colon \Oo_Y\to\Oo_X$ (cf. Definition~\reff{def:morphismOfPresheaves}).
	\end{defi}
	\begin{rem*}
		\begin{alphanumerate}
			\item In fact, the $V\subseteq k^n$ in the above definition of varieties is even \emph{irreducible}, as $V$ is homeomorphic to an open (and hence irreducible) subset $U$ of the irreducible space $X$. In particular, $V$ is an \emph{affine algebraic variety} (in the sense of \cite[Definition~2.2.1]{alg1}) and one can think of varieties as irreducible spaces which are locally isomorphic to (or glued together from) affine varieties.
			\item The $n$ in the above definition is \emph{not} required to be constant, not even for a single $x\in X$. In fact, this wouldn't be a sensible thing to ask for, as e.g. $k\subseteq k^1$ and $k\times\{0\}\subseteq k^2$ are isomorphic affine varieties. However, the \emph{Krull dimension} $\dim X$ (in the sense of \cite[Definition~2.1.4]{alg1}) is a well-defined thing and one can show that $\dim X=\dim V$ in the above situation (this is a consequence of \cite[Theorem~6]{alg1} and the \emph{locality of codimension}, cf. \cite[Remark~2.1.3]{alg1}).
		\end{alphanumerate}
	\end{rem*}
	\begin{example}
		    Let $V\subseteq k^n$ be Zariski-closed, $W\subseteq V$ open. The ring $\Oo_V(W)$ of \emph{regular functions} on $W$ is the ring of functions $\lambda\colon W\to k$ such that for any $x\in W$ there is an open neighbourhood $\Omega$ of $x$ and polynomials $p,q\in R= k[X_1,\ldots,X_n]$ such that $q$ does not vanish on $\Omega\cap W$ and such that we have $\lambda(y) = \frac{p(y)}{q(y)}$ for every $y\in \Omega\cap W$. (cf. \cite[Definition 2.2.2]{alg1}).
		     
		     The sheaf $\Oo_V$ defined by $W\mapsto \Oo_V(W)$ is called the \emph{structure sheaf} on $V$. If $W=V$ it can be shown that any $f\in \Oo_V(V)$ can be written as $f=p|_V$ where $p\in R$ (cf. \cite[Proposition 2.2.2]{alg1}).
	\end{example}
	    
	\begin{example}
	    The \emph{projective space} $\IP(V)$, where $V$ is a $k$-vector space, is the set of one-dimensional subspaces of $V$. Let $\IP^n(k) = \IP(k^{n+1})$. If $(x_0,\ldots,x_n)\in k^{n+1}\setminus\{0\}$, let $[x_0,\ldots,x_n]$ denote the subspace generated by $(x_1,\ldots, x_n)$.
	     
	     Recall that an ideal $I\subseteq R=k[X_0,\ldots,X_n]$ is called \emph{homogenous} if it is generated by homogenous elements (i.e. polynomials in which every monomial has the same total degree). Let $I$ be homogenous, let $V(I)\subseteq \IP^n(k)$ be the set of all $[x_0, \ldots, x_n]\in\IP^n(k)$ such that $f(x_0,\ldots, x_n)$ vanishes for all $f\in I$. Call a subset $A\subseteq\IP^n(k)$ \emph{Zariski-closed} if there is a homogenous ideal $I$ such that $A= V(I)$. This turns $\IP^n(k)$ into an irreducible, $n$-dimensional, Noetherian topological space.
	     
	     Let $V\subset \IP^n(k)$ be closed, $W\subseteq V$ open and $\lambda\colon W\to k$ any function. We call $\lambda$ \emph{regular} on $W$, or $\lambda \in \Oo_V(W)$, if any $x\in W$ has an open neighbourhood $\Omega$ such that there are two polynomials $p,q\in k[X_0,\ldots,X_n]$ homogenous of the same degree such that $q(y_0,\ldots,y_n) \neq 0$ and 
	     \begin{align*}
	     	\lambda([y_0,\ldots,y_n]) = \frac{p(y_0,\ldots,y_n)}{q(y_0,\ldots,y_n)}
	     \end{align*}
	     for all $[y_0,\ldots,y_n]\in W\cap \Omega$.
	     
	     The \emph{affine space} $\IA^n(k)$ is just good old $k^n$ equipped with its Zariski topology. Consider the map
	     \begin{align*}
	        \IP^n(k)\setminus V(X_i) &\isomorphism \IA^n(k)\\
	        [x_0,\ldots, x_n]&\longmapsto \left(\frac{x_0}{x_i}, \ldots, 
	        \frac{x_{i-1}}{x_i},\frac{x_{i+1}}{x_i},\ldots,\frac{x_n}{x_i}\right)\;.
	    \end{align*}
	    This is a homeomorphism and identifies the structure sheaves with each other. Hence, for any irreducible closed subset $A\subseteq \IP^n(k)$ such that $Y\coloneqq A\cap(\IP^n(k)\setminus V(X_i)) \neq \emptyset$, $(Y, \Oo_A|_Y) $ is isomorphic to an affine algebraic variety. Thus, quasi-projective algebraic varieties (i.e. $(U,\Oo_U)$ where $U\subseteq \IP^n(k)$ is a non-empty open subset of an irreducible closed subset) are algebraic prevarieties in the sense of Definition~\reff{def:preVarieties}.
\end{example}
\begin{varthm}{example}\lbl{ex:openSubsetsArePrevarieties}
 When $X$ is prevariety in the sense of Definition~\reff{def:preVarieties} and $U\subseteq X$ is open and $U\neq \emptyset$, then $(U,\Oo_X|_U)$ is a prevariety. Note that any non-empty open subset of an irreducible set is necessarily irreducible as well, so irreducibility of $U$ is not required as an extra condition.
\end{varthm}
\begin{varthm}[b]{example}\lbl{ex:irreducibleSubsetsArePrevarieties}
 Let $X$ be a prevariety, $A\subseteq X$ irreducible and closed. Then $(A,\Oo_A)$ is a prevariety, wherein the structure sheaf $\Oo_A$ is defined as follows: If $W\subseteq A$ is open, let
 \begin{align*}
    \Oo_A(W) = \left\{ f\colon W\to k \st 
    \begin{array}{c}
	    \text{every } x\in W\text{ has an open neighbourhood } x\in U\subseteq X  \\
	    \text{and } \phi\in \Oo_X(U)\text{ such that } f(y) = \phi(y)\ \forall y\in U\cap W
    \end{array}\right\}\;.
 \end{align*}
 Then one may check that $(A,\Oo_A)$ is a prevariety. Note that $\Oo_A$ is \emph{not} given by the restriction $\Oo_X|_A$ (which is only defined for open subsets $U\subseteq X$ anyway). If one prefers a more functorial definition of $\Oo_A$, the following will do: For each open subset $U\subseteq X$, let 
 \begin{align*}
 	I(U)=\left\{\phi\in\Oo_X(U)\st \phi\text{ lies in the maximal ideal of }\Oo_{A,a}\ \forall a\in U\cap A\right\}
 \end{align*}
 (the \emph{stalk} $\Oo_{A,a}$ is defined in \cite[Definition 2.2.5]{alg1} or, for arbitrary presheaves, in Definition~\reff{def:stalk}). Then
 \begin{align*}
 	\Oo_A(W)=\colimit[U] \Oo_X(U)/I(U)\;,
 \end{align*}
	where the colimit is taken over all open subsets $U\subseteq X$ such that $U\cap A=W$.
\end{varthm}

\begin{rem*}
 The following conditions on a topological space $X$ are equivalent:
 \begin{alphanumerate}
  \item
    If $x\neq y$ are points of $X$, there are open neighbourhoods $V,W\subseteq X$ seperating them, i.e. $x\in V$, $y\in W$ and $V\cap W= \emptyset$. This is the usual definition for $X$ being \emph{Hausdorff}.
  \item
    The diagonal $\Delta = \left\{(x,x)\st x\in X\right\}\subseteq X\times X$ is a closed subset.
  \item 
    If $a$ and $b$ are continous maps $T\to X$, then their \emph{equalizer} $K = \left\{t\in T\st a(t) = b(t)\right\}$ is closed in $T$.
 \end{alphanumerate}

\end{rem*}


\begin{defi}[variety]\lbl{def:variety}
    Let $X$ be a prevariety over $k$ in the sense of Definitions \reff{def:preVarieties}. We call $X$ \defemph{separated} or a \defemph{variety} over $k$ if and only if $\left\{t\in T\st a(t)=b(t)\right\}$ is closed in $T$ whenever $a$ and $b$ are a pair of \emph{morphisms of prevarieties} $T\doublemorphism[a][b] X$. 
\end{defi}

\begin{example}[Line with two origins]
    Let $n>0$ and $X = \left( \IA^n(k) \setminus\{0\}\right) \cup \{0_+\} \cup \{0_-\}$. Consider two morphisms $\iota_+,\iota_-\colon \IA^n(k) \to X$ defined by
    \begin{align*}
	\iota_\pm(x) = \begin{cases} x &\text{if }x\neq 0\\
			0_\pm &\text{if } x = 0
		    \end{cases}
    \end{align*}
    Let $U\subseteq X$ be open iff both $\iota_+^{-1} (U)$ and $\iota_-^{-1}(U)$ are both open in $\IA^n(k)$, and let 
    \begin{align*}
        \Oo_X(U) = \left\{f\colon U\to k\st \iota_\pm^* f = f \iota_\pm \in \Oo_{\IA^n(k)} \left(\iota_\pm^{-1}(U)\right)\right\}.
    \end{align*}
    Then $U_\pm = \iota_\pm^{-1}\big(\IA^n(k)\big)$ are both open and $\IA^n(k)\morphism[\iota_\pm] U_\pm$ is a homeomorphism identifying the respective structure sheaves. Thus, $X$ is a prevariety, but not a variety in the sense of Definition~\reff{def:variety} as we may take $T=\IA^n(k) \morphism[\iota_\pm] X$ in Definition \reff{def:variety} and obtain $K = \left\{x\in \IA^n(k)\st \iota_+(x) = \iota_-(x)\right\} = \IA^n\setminus\{0\}$, which is not closed.
\end{example}
\begin{example}
    \begin{alphanumerate}
    \item \lbl{ex:affineIsVariety}
        Any affine algebraic variety is a variety in the sense of Definition \reff{def:variety}.
    \item
        In particular, $\IA^0 = \{0\}$ is a variety, as is any one-point prevariety.
    \item 
        Non-empty open and irreducible closed subsets $Y$ of varieties $X$ are varieties 
    \end{alphanumerate}
\end{example}
\begin{proof}
		For part \itememph{c} note that the inclusion $Y\morphism[\iota] X$ (together with $\iota^*\colon \Oo_X\to\Oo_Y$) is a morphism of prevarieties, and for a pair $a,b\colon T\to A$ of morphisms of prevarieties we have $\left\{t\in T\st a(t) = b(t) \right\} = \left\{t \in T\st(\iota a)(t) = (\iota b)(t) \right\}$. The latter is closed in $T$ because $X$ is a variety.
	
        For part \itememph{a} let $X\subseteq k^n$ be closed and irreducible, $a,b\colon T\to X$ be morphisms of prevarieties and $K= \left\{t\in T\st a(t) = b(t)\right\}$. To show that $K$ is closed in $T$, it is sufficient to show that any $t\in T$ has a neighbourhood $\Omega$ such that $K\cap \Omega$ is closed in $\Omega$. Choosing $\Omega$ such that it is isomorphic to an affine algebraic variety, which is possible because $T$ is a prevariety, we may assume without loss of generality that $T\subseteq k^n$ is an affine algebraic variety in (i.e.  an irreducible subset of) $k^n$. Let 
	        \begin{align*}
		    X_i\colon X&\longrightarrow k\\
		    (x_1,\ldots,x_n)&\longmapsto x_i
		\end{align*}
		denote the projection to the $i\ordinalth$ coordinate. Then $X_i\in\Oo_X(X)$, hence $\alpha_i = a^\ast X_i$ and $\beta_i = b^\ast X_i$ are in $\Oo_T(T)$ and 
		\begin{align}
		    K= \left\{ t\in T\st \alpha_i(t) = \beta_i(t)\ \forall i\right\} = \bigcap_{i=1}^n V(\alpha_i-\beta_i)\;.
		\end{align}
		But we proved in Algebra I that $V(\phi)$ is closed in $T$ whenever $T$ is an affine algebraic variety and $\phi\in  \Oo_T(T)$ (cf. \cite[Proposition 2.2.1]{alg1}).
		
		Part \itememph{b} is trivial from \itememph{a}.	
\end{proof}
\begin{rem*}
    \begin{alphanumerate}
    \item 
        $K\subseteq T$ is closed iff for all $t\in T$ there is an open neighbourhood $\Omega_t$ such that $\Omega_t\cap K$ is closed in $\Omega_t$, since 
        \begin{align*}
            T\setminus K = \bigcup_{t\in T} \big(\Omega_t\setminus (K\cap \Omega_t)\big)
        \end{align*}
        is open as a union of open subsets.
    \item
        It is \emph{not} sufficient to require this just for all $t\in K$.
    \end{alphanumerate}
\end{rem*}
\begin{prop}\lbl{prop:commonNeighbourhoodVariety}
    Let $X$ be any prevariety such that for arbitrary $x,y\in X$ there is a common open neighbourhood $U$ of $x$ and $y$ which is affine (that is, isomorphic as a prevariety to an affine variety in some $k^n$). Then $X$ is a variety.
\end{prop}
\begin{proof}
    Let $a,b\colon T\to X$ as in Definition \reff{def:variety} and $t\in T$ and let $U\subseteq X$ be an affine open subset of $X$ containing both $a(t)$ and $b(t)$. Let $V = a^{-1}(U) \cap b^{-1}(U)\subseteq T$. This is an open subset of $T$ containing $t$. It is easily seen that $a|_V$ and $b|_V$ are morphisms $V\to U$. By the previous example, $K\cap V = \left\{t\in U\st a(t) = b(t)\right\}$ is closed in $V$. Because such a neighbourhood can be found for any $t\in T$, $K$ is closed in $T$ by the previous remark.
\end{proof}
\begin{cor}
    Quasi-projective and quasi-affine algebraic varieties are varieties.
\end{cor}
\begin{proof}
	\emph{Step 1.} Let $X\subseteq k^n$ be irreducible and closed. Recall that for any $f\in \Oo_X(X)\setminus\{0\}$, $X\setminus V(f)$ is affine: Let $X=V(\pp)$ for some prime ideal $\pp\in R=k[X_1,\ldots,X_n]$. We identify $f\in \Oo_X(X)=R/\pp$ with an arbitrary representative $f\in R$. Now consider the ideal $\qq\subseteq k[X_1,\ldots,X_n,T]$ generated by $\pp$ and $1-T\cdot f$. One can show that
	\begin{align*}
		V(\qq) &\isomorphism X\setminus V(f)\\
		(x,t) &\longmapsto x \\
		(x,f(x)^{-1}) &\longmapsfrom x
	\end{align*}
	is a homeomorphism topological spaces. Then $V(\qq)$ is irreducible (as $X\setminus V(f)$ is), hence an affine variety, which proves that $X\setminus V(f)$ must be affine as well (cf. \cite[Proposition~2.2.4]{alg1}).
	
	Let $U\subseteq X$ be open and $F\subseteq U$ be finite. Let $X\setminus U = V(I)$ with $I\subseteq R$ an ideal. If $n=0$, $U = \{0\}$ is affine and we have nothing to prove. Let $n\geq 1$. Because $k$ is infinite, the $k$-vector space $I$ cannot be the union of its finitely many codimension one subspaces $I_x=\left\{p\in I\st p(x) = 0\right\}$ for $x\in F$. Therefore, there is $p\in I$ such that $F\subseteq X\setminus V(p)$. By our initial remark, $X\setminus V(p)$ is affine. As $p\in I$, $X\setminus V(p)\subseteq U$ and the claim follows.
	
	\emph{Step 2.} Let $X\subseteq \IP^n(k)$ be quasi-projective and let $F\subseteq X$ be finite. We can write 
	\begin{align*}
		F=\left\{\big[f_0^{(i)},\ldots, f_n^{(i)}\big]\st 1\leq i \leq N\right\}\;.
	\end{align*} 
	As $k^{n+1}$ is larger than the union of the $N$ codimension one subspaces \begin{align*}
		V_i=\left\{(\xi_j)_{j=0}^n\st \sum_{j=0}^n \xi_j f_j^{(i)} = 0\right\}\quad\text{for }i=1,\ldots,N\;,
	\end{align*} 
	there is a homogenous polynomial $p\neq 0$ of degree 1 such that $p\big(f_0^{(i)},\ldots, f_n^{(i)}\big) \neq 0$ for all $1\leq i\leq N$. Then $F\subseteq X\setminus V(p)$. But $\IP^n(k)\setminus V(p)$ is isomorphic to $k^n$ as this is the case when $p= X_0$ and $\GL_{n+1}(k)$ transitively acts on $k^{n+1}\setminus\{0\}$. Thus, $F\subseteq X\setminus V(p)$ and $X\setminus V(p)$ is isomorphic to a quasi-affine variety. The assertion now follows from Step~1.
\end{proof}
    \begin{rem*}
        \begin{itemize}
          \item 
            Let $X$ be a prevariety. If two arbitrary points have a common neighbourhood which is a variety, then $X$ is a variety.
          \item 
            We have actually seen that arbitrary finite subsets of quasi-projective algebraic varieties have open neighbourhoods which are affine. This is usefull, e.g., when forming quotients by finite groups.
          \item
            Hironaka (see Hartshorne for examples of a non-quasi-projective variety) has an example of a variety where there are two points without a common affine neighbourhood.
        \end{itemize}
        
    \end{rem*}
\section{General properties and sheaf constructions}
\begin{defi}[Stalk]\lbl{def:stalk}
    Let $\Gg$ be a presheaf on the topological space $X$ and $x\in X$. Let $\Gg_x = \colimit[U] \Gg(U)$, denote the \defemph{stalk} of $\Gg$ at $x$, where $\colimit$ is taken over the open neighbourhoods $U$ of $x$.
\end{defi}
\begin{rem*}
    In general, $\colimit$ is the colimit in the target category. For the target categories of abelian groups, sets or rings we have
    \begin{align*}
        \Gg_x = \left\{(U,g) \st x\in U \text{ open }, g\in \Gg(U)\right\}/_\sim\;,
    \end{align*}
    where $(U,g)\sim (V,h)$ iff there is an open neighbourhood $W\subseteq U\cap V$ of $x$ such that $g|_W = h|_W$. 
\end{rem*}
\begin{example}
    The stalk at $x$ of the structure sheaf of a prevariety $X$ is called the local ring $\Oo_{X,x}$ of $X$ at $x$.
\end{example}
\begin{rem*}
    A set $\Bb$ of open subsets of a topological space $X$ is called a \emph{base} of the topology if every open subset of $X$ may be written as a union of elements of $\Bb$. A set of subsets of some set $X$ is the base of a (uniquely determined) topology on $X$ iff the intersection of two arbitrary elements of $\Bb$ can be written as the union of elements of $\Bb$ and $\Bb$ covers $X$.
\end{rem*}
\begin{defi}[presheaves defined on a topological base]\lbl{def:presheafOnBase}
    Let $\Bb$ be a base of the topology on $X$. A \defemph{presheaf} on $\Bb$ associates
    \begin{itemize}
    	\item a set (group, ring, \ldots) $\Gg(U)$ to any $U\in \Bb$
    	\item and to each inclusion of elements of $\Bb$ a \emph{restriction morphism}  		$(-)|_V\colon\Gg(U) \morphism \Gg(V)$
    	such that $\Gg(U) \morphism[(-)|_U]\Gg(U)$ equals $\id_{\Gg(U)}$ and $f|_W = (f|_V)|_W$ for all $f\in \Gg(U)$ if $W\subseteq V\subseteq U$ is a inclusion of elements of $\Bb$. 
    \end{itemize}
	 If $\Gg$ is a presheaf on $\Bb$ and $x\in X$ we put $\Gg_x = \colimit[U] \Gg(U)$ where the direct limit (\emph{direct limit} means the same as \emph{colimit}) is taken over alle $U\in \Bb$ containing $x$.
\end{defi}
\begin{rem*}
    Equip $\Bb$ with partial order $\preceq$ where $V\preceq U$ iff $V\supseteq U$. Any partially ordered set $(\XX, \preceq)$ defines a category in which there is a morphism $X\to Y$ precisely if $X\preceq Y$. Then, a presheaf on $\Bb$ is a functor from (the category made out of) $\Bb$ and the target category.
\end{rem*}
\begin{varthm}{defi}\lbl{def:morphismOfPresheaves}
    A morphism $\Gg\morphism[f] \Hh$ of presheaves on $\Bb$ is a collection $\Gg(U)\morphism[f_U] \Hh(U)$ in the target category such that
    \begin{diagram}
    	\node (a) at (0,1.5) {$\Gg(U)$};
    	\node (c) at (0,0) {$\Hh(U)$};
    	\node (b) at (2.5,1.5) {$\Gg(V)$};
    	\node (d) at (2.5,0) {$\Hh(V)$};
    	\scriptsize
    	\draw[->] (a) -- (b) node[pos=0.5, above] {$(-)|_V$};
    	\draw[->] (a) -- (c) node[pos=0.5, left] {$f_U$};
    	\draw[->] (c) -- (d) node[pos=0.5, above] {$(-)|_V$};
    	\draw[->] (b) -- (d) node[pos=0.5, right] {$f_V$};
    \end{diagram}
    commutes. We will often write $\Gg(U) \morphism[f] \Hh(U)$ instead of $\Gg(U)\morphism[f_U] \Hh(U)$.
\end{varthm}
\begin{fact}\lbl{fact:smallerBaseSheaf}
    If $\snake \Bb \subseteq \Bb$ is a smaller base of the same topology there is an obvious restriction $\snake \Gg = \Gg|_{\snake \Bb}$. We have a canonical isomorphism
    \begin{align*}
    	\snake \Gg_x \isomorphism \Gg_x
    \end{align*}
    sending $(U,g)/_\sim \in \snake \Gg_x$ (where $U\in \snake \Bb$, $g\in\Gg(U)$, $x\in U$) to $(U,g)/_\sim\in \Gg_x$. It is easy to see that this is well-defined and an isomorphism.
\end{fact}
\begin{defi}[sheafification]\lbl{def:sheafification}
    Let $\Bb$ be a topology base on $X$, $\Gg$ a presheaf on $\Bb$. We define the \defemph{sheafification} (German: \defemph{Garbifizierung}) $\Gg^{\sh}$ (Professor Franke uses the notation $\Sheaf(\Gg)$) of $\Gg$ as follows:
    \begin{align}\lbl{eq:sheafification}
        \Gg^ \sh(U) = \left\{ (g_x)\in \prod_{x\in U}\Gg_x\st 
        \begin{array}{c}
	        \text{for all }y\in U\text{ there are an open neighbourhood }V\in\Bb\\
	        \text{and }\gamma\in\Gg(V)\text{ such that }g_x=(V,\gamma)/_\sim\ \forall x\in U\cap V
        \end{array}\right\}\tag{$*$}
    \end{align}
    Moreover, we define the restriction morphisms via $(g_x)_{x\in U}|_V = (g_x)_{x\in V}$.
\end{defi}
\begin{rem*}    
    \begin{alphanumerate}
      \item 
        The definition \eqreff{eq:sheafification} obviously does not change if the coherence condition on its right hand side is replaced by 
        \begin{quote}
            for every $y\in U$, there are an open neighbourhood $V$ of $y$ in $X$ and $\gamma\in \Gg(U)$ such that $V\subseteq U$ and $V\in\Bb$ and such that $g_x =(V,\gamma)/_\sim$ for all $x\in V$.
        \end{quote}
      \item 
        It is easy to see that $\Hh=\Gg^\sh$ satisfies the sheaf axiom: If $U = \bigcup_{i\in I} U_i$ is an open cover and $g^{(i)} = \big(g^{(i)}_x\big)_{x\in U_i}\in \Hh(U_i)$ as on the right hand side of the sheaf axiom, define $g\in \Hh(U)$ by $g_x = g_x^{(i)}$ where $i$ is chosen such that $x\in U_i$. This depends on $x$ only. It is easy to see that indeed $g\in \Hh(U)$ and that $g$ this is the only element of $\Hh(U)$ with $g|_{U_i} = g_i$ for all $i\in I$.
      \item
        It is easy to see that for every $x\in X$, $\Gg\to \Gg_x$ is a functor from the category of presheaves to the respective target category, provided that the colimits occuring in the definition of $\Gg_x$ exist in that category. Moreover $(-)^\sh$ is a functor from the category of presheaves with values in sets, groups, or rings to the respective category of sheaves.
    \end{alphanumerate}
\end{rem*}
We define a \emph{canonical morphism} (cf. Definition~\reff{def:canonicalMorphism})
\begin{align*}
    \Gamma_\Gg\colon\Gg&\morphism \Gg^\sh|_\Bb\\
    g\in \Gg(U) &\longmapsto (g_x)_{x\in U}
\end{align*}
of presheaves on $\Bb$.

\begin{prop}\lbl{prop:sheafificationMorphisms}
    We consider (pre-)sheaves of sets, (abelian) groups or rings.
    \begin{alphanumerate}
      \item 
        The morphism $\Gg_x \morphism \Gg^\sh_x$ induced by $\Gamma_\Gg$ is an isomorphism, for arbitrary $x\in X$.
      \item
        If $\Gg$ and $\Hh$ are presheaves on $\Bb$ and $\Gg\morphism[\phi] \Hh$ is a morphism between them such that the induced morphism $\Gg_x\morphism[\phi_x] \Hh_x$ is injective (respectively bijective) for arbitrary $x\in X$, then  
        \begin{align*}
            \Gg^\sh(U) \xrightarrow{\phi_U^\sh} \Hh^\sh(U)
        \end{align*}
        is injective (respectively bijective) for every open subset $U$ of $X$.
      \item 
        If $\snake \Bb \subseteq \Bb$ is a topology base then the canonical morphism \begin{align*}
        	\big(\Gg|_{\snake\Bb}\big) ^\sh\morphism \Gg^\sh
        \end{align*}
        (defined using $\big(\Gg|_{\snake\Bb}\big)_x \isomorphism \Gg_x$)  is an isomorphism.
      \item 
        If $\Bb$ is closed under intersections and $\Gg$ satisfies the sheaf axiom for coverings of elements of $\Bb$ by elements of $\Bb$, then 
        \begin{align*}
        	\Gamma_\Gg\colon \Gg\isomorphism \Gg^\sh|_\Bb\;.
        \end{align*}
    \end{alphanumerate}
\end{prop}
\begin{proof}
	\itememph{c} If you think about it for a while, this becomes rather obvious from the definitions.\lbl{thisIsNotAProofCozWeAreLazy}
	
	For part \itememph{a}, we prove surjectivity first: Let $g\in\Gg^\sh(U)$ and $x\in U$, we need to find an open neighbourhood $V\in \Bb$ of $x$ and $\gamma\in \Gg(V)$ such that the images of $\Gamma_\Gg(\gamma)\in \Gg^\sh(V)$ and of $g$ in $\Gg^\sh_x$ coincide. We chose $V$ and $\gamma$ as on the right hand of \eqreff{eq:sheafification}. As $\Bb$ is a topology base there is $W\in\Bb$ sucht that $x\in W\subseteq U\cap V$. It follows from the definition of $\Gamma_\Gg$ and the coherence condition that $g|_W = \Gamma_\Gg(\gamma)|_W$. Consequently, their images in the stalk at $x$ coincide, as asserted.
	
	To show injectivity define
	\begin{align*}
	    \iota_x\colon \Gg^\sh_x &\morphism \Gg_x\\
	    \bigg(\begin{array}{c}
		    \text{image of}\\
		    (g_y)_{y\in U} \in \Gg^\sh(U) \text{ in } \Gg^\sh_x 
	    \end{array}\bigg) &\longmapsto g_x\;.
	\end{align*}
	It is easy to see that this is well-defined and that it is a left inverse to the map $\Gg_x\morphism[(\Gamma_{\Gg})_x] \Gg^\sh_x$ studied. Therefore, $(\Gamma_\Gg)_x$  is also injective.
	
	Let's prove \itememph{b}. The assertion about injectivity is trivial. Let us assume that $\Gg_x\morphism[\phi_x]\Hh_x$ is an isomorphism for arbitrary $x\in X$ and let $h=(h_x)_{x\in U}\in \Hh^\sh(U)$. We put $g=(g_x)_{x\in U} \in \prod_{x\in U}\Gg_x$ where $g_x = \phi^{-1} (h_x)$. If $g\in \Gg^\sh(U)$ then it is obvious from the definitions that $\phi_U^\sh(g) = h$, proving the bijectivity of $\Gg^\sh(U) \morphism[\phi_U^\sh] \Hh^\sh(U)$.
	
	To verify the coherence condition for $g$, fix $x\in U$. As $h$ satisfies the coherence condition there are an open neighbourhood $V\in\Bb$ of $x$ and $\eta\in\Hh(V)$ such that $h_y$ equals the image of $\eta$ in $\Hh_y$ for all $y\in U\cap V$. As the image of $\eta$ in $\Hh_x$ is in the image of $\Gg_x\morphism[\phi_x]\Hh_x$, there are a neighbourhood $W\in\Bb$ of $x$ and $\gamma\in\Gg(W)$ such that $\phi_x$ maps the image $(W,\gamma)/_\sim$ of $\gamma$ in $\Gg_x$ to the image $(V,\eta)/_\sim$ of $\eta$ in $\Hh_x$. By definition of stalks and $\phi_x$, this means that there is an open neighbourhood $\Omega\in\Bb$ of $x$ such that $\Omega\subseteq V\cap W$ and $ \phi_W(\gamma)|_\Omega = \eta|_\Omega$. Replacing $V$ by $\Omega$ and $\gamma$ and $\eta$ by their restrictions to $V$ (which equals $\Omega$ now), we may assume that there is $\gamma\in\Gg(V)$ such that $\phi(\gamma) = \eta$. For $y\in V$, \begin{align*}
		\phi_y(g_y) = h_y=(V,\eta)/_\sim = \big(V,\phi(\gamma)\big)/_\sim = \phi_y\big((V,\gamma)/_\sim\big)\;.
	\end{align*}
	Since $\phi_y$ is an isomorphism, this implies $g_y = (V,\gamma)/_\sim$. Thus $g\in \Gg^\sh(U)$.
	
	And finally part \itememph{d}. We first show injectivity of $\Gg(U)\morphism[\Gamma_\Gg] \Gg^\sh(U)$, for $U\in \Bb$. Let $g,g'\in \Gg(U)$ have the same image in $\Gg^\sh(U)$, i.e. for every $x\in U$ their images $g_x$ and $g'_x$ in $\Gg_x$ coincide. By definition of $\Gg_x$, this means that for every $x\in U$ there is an open neighbourhood $V_x\in\Bb$ of $x$, such that $g|_{V_x}=g'|_{V_x}$. As the $V_x$ cover $U$, this implies $g=g'$ by the sheaf axiom.
	
	For surjectivity, let $g=(g_x)_{x\in U}\in \Gg^\sh(U)$. For every $x\in U$ there are, by the coherence condition on the right hand side of \eqreff{eq:sheafification}, an open neighbourhood $V_x\in\Bb$ and $\gamma^{(x)}\in \Gg(V_x)$ such that $g_y$ equals the image of $\gamma^{(x)}$ in $\Gg_y$ for all $y\in U\cap V_x$. Replacing $V_x$ by $U\cap V_x$ and $\gamma^{(x)}$ by its restriction we may assume $V_x\subseteq U$. If $x,\xi\in U$ and $y\in V_x\cap V_\xi$, then the images of $\gamma^{(x)}$ and $\gamma^{(\xi)}$ in $\Gg_y$ coincide (they are $g_y$). Thus, the images of $\gamma^{(x)}|_{V_x\cap V_\xi}$ and $ \gamma^{(\xi)}|_{V_x\cap V_\xi}$ under $\Gg(V_x\cap V_\xi ) \morphism[\Gamma_\Gg] \Gg^\sh(V_x\cap V_\xi)$ coincide. Consequently,  $\gamma^{(x)}|_{V_x\cap V_\xi} = \gamma^{(\xi)}|_{V_x\cap V_\xi}$, as injectivity has already been shown. By the sheaf axiom for $\Gg$, there is $\gamma\in \Gg(U)$ such that $\gamma^{(x)}=\gamma|_{V_x}$ simultaneously for all $x\in U$ (note that in all of this we silently used that $\Bb$ is closed under intersections). Then 
	\begin{align*}
		g_x=\big(V_x, \gamma^{(x)}\big)/_\sim = \big(V_x,\gamma|_{V_x}\big)/_\sim = \big(U,\gamma\big)/_\sim\quad\text{for all }x\in U\;. 
	\end{align*}
	Thus, $\Gamma_\Gg(\gamma) = g$.
\end{proof}
\begin{cor}\lbl{cor:sheafDefinedByStalks}
    The following assertions hold in the categories of sets, (abelian) groups or rings.
    \begin{alphanumerate}
      \item 
        If $\Ff$ is a sheaf of the given type, then any $f\in\Ff(U)$ is uniquely determined by the family of its images in $\Ff_x$ for $x\in U$, that is, 
        \begin{align}\lbl{eq:sheafDefinedByStalks}
            \Ff(U) \morphism \prod_{x\in U} \Ff_x
        \end{align}
        is injective. The image of $\Ff(U)$ under this map is the set of all $(f_x)_{x\in U}\in\prod_{x\in U}\Ff_x$ such that for every $x\in U$ there are an open neighbourhood $V$ of $x$ and $\phi\in \Ff(V)$ such that $f_y$ equals the image $\phi_y$ of $\phi$ under $\Ff(U)\morphism \Ff_y$ for all $y\in U\cap V$. %This is proven by Proposition \reff{prop:sheafificationMorphisms}(d).
      \item 
        A morphism of sheaves inducing isomorphisms (respectively injective maps) on stalks defines isomorphisms (respectively injective maps) on sections of open subsets. %This follows from Proposition \reff{prop:sheafificationMorphisms}(b) as 
      \item 
        If two morphism $\Ff \doublemorphism[\alpha][\beta] \Gg$ define identical maps $\Ff_x \doublemorphism[\alpha_x][\beta_x] \Gg_x$ for each $x\in X$, then $\alpha= \beta$.
      \item
        If $\Gg\morphism[\alpha] \Hh$ is a morphism of sheaves such that $\Gg_x\morphism[\alpha_x] \Hh_x$ is injective (respectively surjective) for all $x$, then $\alpha$ is a monomorphism (respectively an epimorphism). %This follows from Proposition \reff{prop:sheafificationMorphisms}.
      \item
        Let $\Rr$ be a sheaf of rings on $x$ and $\rho\in\Rr(U)$, then $\rho\in \Rr(U)^\times$ iff for each $x\in U$ the image $\rho_x$ of $\rho$ in $\Rr_x$ is in $\Rr_x^\times$.
    \end{alphanumerate}
\end{cor}
    \begin{proof}
    	\itememph{a} is an immediate consequence of Proposition~\reff{prop:sheafificationMorphisms}\itememph{d}.
    	
    	Part \itememph{b} follows from Proposition~\reff{prop:sheafificationMorphisms}\itememph{b} as
    	\begin{diagram}
    		\node (a) at (0,1.5) {$\Ff(U)$};
    		\node (c) at (0,0) {$\Ff^\sh(U)$};
    		\node (b) at (2.5,1.5) {$\Gg(U)$};
    		\node (d) at (2.5,0) {$\Gg^\sh(U)$};
    		\scriptsize
    		\draw[->] (a) -- (b) node[pos=0.5, above] {$\alpha$};
    		\draw[->] (a) -- (c) node[pos=0.5, sloped, above=-0.25ex] {$\sim$} node[pos=0.5, left] {$\Gamma_\Ff$};
    		\draw[->] (c) -- (d) node[pos=0.5, above] {$\alpha$};
    		\draw[->] (b) -- (d) node[pos=0.5, sloped, above=-0.25ex] {$\sim$} node[pos=0.5, left] {$\Gamma_\Gg$};
    	\end{diagram}        
    	commutes. Here the vertical arrows are isomorphisms by Proposition~\reff{prop:sheafificationMorphisms}\itememph{d}.
    	
    	Part \itememph{c} immediately follows from \itememph{a}.
    	
    	Part \itememph{d} is quite obvious. Let $\alpha_x$ be injective for arbitrary $x\in X$, and let $\Tt\doublemorphism[\tau][\smash{\theta}] \Ff$ be morphisms such that $\alpha \tau= \alpha \theta$. Then $\alpha_x \tau_x = \alpha_x \theta_x$ for all $x\in X$. As $\alpha_x$ is an injective map this implies $\tau_x = \theta_x$. By \itememph{c} we have $\tau = \theta$. Hence $\alpha$ is a monomorphism.
    	
    	Let $\alpha_x$ be surjective for arbitrary $x\in X$, and let $\Ff\doublemorphism[\tau][\smash{\theta}] \Tt$ be morphisms such that $ \tau\alpha=  \theta\alpha$. Then $\tau_x\alpha_x = \theta_x\alpha_x$ for all $x\in X$. As $\alpha_x$ is a surjective map this implies $\tau_x = \theta_x$. By \itememph{c} we have $\tau = \theta$. Hence $\alpha$ is a epimorphism.
    	
    	%However, in fancyspeak (and for the sake of a rigid argument), one can consider the \emph{functor} $F\colon\cat{PreShv}(X)\morphism\cat{Set}$ from the category of presheaves on $X$ to the category of sets given by
    	%\begin{align*}
    	%	F(\Gg)=\prod_{U\subseteq X\text{ open}}\Gg(U)
    	%\end{align*}
    	%(we regard the $\Gg(U)$ as sets). Then $F$ is faithful. Hence, if $\alpha$ is stalk-wise injective then also section-wise (by \itememph{b}), hence $F(\alpha)$ is injective. Faithfulness of $F$ finally shows that $\alpha$ must be a monomorphism.
    	
    	Proving the \emph{only if} part of \itememph{e} is quite trivial since $\Rr(U) \morphism \Rr_x$ is a ring homomorphism, thus maps units to units. Conversely, let $\rho_x$ be a unit for every $x\in U$. We consider the morphism $\Rr|_U \morphism[\rho\cdot]\Rr|_U$ (of sheaves of \emph{sets}, multipliying by $\rho$ is no ring homomorphism!). On stalks it defines the map $\Rr_x \morphism[\rho_x\cdot] \Rr_x$, which is bijective. By \itememph{b} it is an isomorphism, hence there is $\sigma \in \Rr(U)$ such that $\rho \sigma = 1$ and $\rho\in \Rr(U)^\times$.
    \end{proof}
    \begin{fact}
        If $\Ff$ is a presheaf on $\Bb$ and $\snake{\Bb}\subseteq \Bb$ is another topology base, then $\big(\Ff|_{\snake \Bb}\big)^\sh\simeq \Ff^\sh$.
    \end{fact}
    \begin{proof}
    	 This is Proposition~\reff{prop:sheafificationMorphisms}\itememph{c} and we proved it there. Ok, actually \hyperref[thisIsNotAProofCozWeAreLazy]{this} doesn't count as a proof, so let's do it now.
    	
        By Fact \reff{fact:smallerBaseSheaf}, $\big(\Ff|_{\snake \Bb}\big)_x \isomorphism \Ff_x$ is an isomorphism for all $x\in X$. It is clear that 
        \begin{align*}
        	f=(f_x)\in \prod_{x\in U} \Ff_x \simeq \prod_{x\in U} (\Ff|_{\snake\Bb})_x
        \end{align*}
        satisfying the coherence condition for $(\Ff|_{\snake \Bb})^\sh$ also satisfies it for $\Ff^\sh$. Conversely, let $f$ satisfy the coherence condition for $\Ff^\sh$. For every $x\in U$, this means that there is $V\in \Bb$ and $\phi\in \Ff(V)$ such that $\phi_y = f_y$ for $y\in U\cap V$. As $\snake\Bb$ is a topology base there is $W\in \snake \Bb$ such that $x\in W\subseteq V$. Let $\snake\phi = \phi|_W$, then $\snake\phi_y = f_y$ when $y\in U\cap W$. Hence $f\in (\Ff|_{\snake\Bb})^\sh(U)$.
    \end{proof}
    \begin{prop}\lbl{fact:smallerBaseSheafification}
        The following holds for sheaves of sets, rings and (abelian) groups. Let $\Bb$ be a topology base and $\Ff$ a presheaf on $\Bb$. Any morphism $\Ff\morphism[\alpha] \Gg|_\Bb$, where $\Gg$ is a sheaf on $X$, has the form 
        \begin{diagram}
        	\node (F) at (0,1.25) {$\Ff$};
        	\node (FB) at (1.25,0) {$\Ff^\sh|_\Bb$};
        	\node (GB) at (2.5,1.25) {$\Gg|_\Bb$};
        	\scriptsize
        	\draw[->] (F) -- (FB) node[pos=0.5,below left] {$\Gamma_\Ff$};
        	\draw[->] (F) -- (GB) node[pos=0.5,above] {$\alpha$};
        	\draw[->,dashed] (FB) -- (GB) node[pos=0.5,below right] {$\exists!\ \beta|_\Bb$};
        \end{diagram}
        in which $\Ff^\sh\morphism[\beta] \Gg$ is a uniquely determined morphism of sheaves.
    \end{prop}
    \begin{proof}
        If $\beta$ is as above then $\alpha_x$ equals 
        \begin{diagram}
	       	\node (F) at (0,1.5) {$\Ff$};
	       	\node (FB) at (1.5,0) {$\big(\Ff^\sh|_\Bb\big)_x$};
	       	\node (Fsh) at (3.5,0) {$\Ff^\sh_x$};
	       	\node (GB) at (3,1.5) {$\big(\Gg|_\Bb\big)_x$};
	       	\node (G) at (5, 1.5) {$\Gg_x$};
	       	%\path (FB) -- (Fsh) node[pos=0.5] {$\simeq$};	       	
	       	%\path (GB) -- (G) node[pos=0.5] {$\simeq$};
	       	\scriptsize
	       	\draw[->] (F) -- (FB) node[pos=0.5,below left] {$(\Gamma_\Ff)_x$};
	       	\draw[->] (F) -- (GB) node[pos=0.5,above] {$\alpha_x$};
	       	\draw[->] (FB) -- (GB) node[pos=0.5,below right] {$(\beta|_\Bb)_x$};
	       	\draw[->] (Fsh) -- (G) node[pos=0.5, below right] {$\beta_x$};
	       	\draw[->] (FB) -- (Fsh) node[pos=0.5, above=-0.25ex] {$\sim$};
	       	\draw[->] (GB) -- (G) node[pos=0.5, above=-0.25ex] {$\sim$};
        \end{diagram}
        in which also $(\Gamma_\Ff)_x$ is an isomorphism by Proposition~\reff{prop:sheafificationMorphisms}.  It follows that $\beta_x$ is uniquely determined by $\alpha_x$, hence by $\alpha$. By Corollary~\reff{cor:sheafDefinedByStalks}\itememph{c} this means that $\beta$ is uniquely determined by $\alpha$.
        
        To show existence of $\beta$ we construct it as 
        \begin{align*}
            \Ff^\sh \morphism[\alpha^\sh] (\Gg|_\Bb)^\sh \isomorphism \Gg^\sh  \simeq \Gg
        \end{align*}
        (the first isomorphism follows from Fact~\reff{fact:smallerBaseSheafification} and the latter from Proposition~\reff{prop:sheafificationMorphisms}\itememph{d}). It is easily verified that this has the required properties.
    \end{proof}
    \begin{rem*}
        By the usual Yoneda-type argument, it is clear that the above universal property characterizes $\Ff^\sh$ uniquely up to unique isomorphism. For other target categories the above universal property should be taken as the definition of $\Ff^\sh$. It may or may not exist, but is unique if it does.
    \end{rem*}
    
    
    
    
    
    
    
    \appendix
    \chapter{Useful stuff from category theory}
\section{Fundamental concepts}
\begin{defi}[category]
	A \defemph{category} $\Aa$ is a class $\Ob(\Aa)$ of \emph{objects} of $\Aa$ together with:
	\begin{alphanumerate}
	    \item 
	        For two arbitrary $X,Y\in \Ob(\Aa)$, a set $\Hom_\Aa(X,Y)$ of \emph{morphisms} from $X$ to $Y$ in $\Aa$.
	    \item 
	        For $X,Y,Z\in\Ob(\Aa)$, a map 
	        \begin{align*}
	            \Hom_\Aa(X,Y)\times \Hom_\Aa(Y,Z) &\longto \Hom_\Aa(X,Z)\\
	            (f,g) &\longmapsto g\circ f
	        \end{align*}
	        called the \emph{composition of morphisms} in $\Aa$.
	\end{alphanumerate}
	The following assumptions must be satisfied:
	\begin{rmnumerate}
	    \item
	        If $A\morphism[f] B \morphism[g] C\morphism[h] D$ are morphisms in $\Aa$, then $h\circ(g\circ f) = (h\circ g)\circ f$.
	    \item
	        For any $A\in\Ob(\Aa)$ there is a unique morphism $A\morphism[\id_A] A$ in $\Hom_\Aa(A,A)$ such that $\id_A \circ f = f$ and $g\circ \id_A = g$ for any $f\in \Hom_\Aa(B,A)$ and any $g\in \Hom_\Aa(A,C)$ for arbitrary $B,C\in \Ob(\Aa)$.
	\end{rmnumerate}
\end{defi}
\begin{example}
    \begin{itemize}
        \item 
            The category $\cat{Set}$ of sets where $\Ob(\Aa)$ is the class of sets, $\Hom_\Aa(X,Y)$ is the set of maps from $X$ to $Y$ and the composition of morphism is the composition of maps.
        \item 
            The category $\cat{Grp}$ of groups where $\Ob(\Aa)$ is the class of groups, $\Hom_\Aa(X,Y)$ is the set of group morphisms from $X$ to $Y$ and the composition of morphisms is the composition of maps.
        \item 
            The categories of rings $\cat{Ring}$, commutative rings $\cat{Ab}$ and abelian groups $\cat{Ab}$ are all defined similarly.
        \item 
            The topological spaces with the continous maps $\cat{Top}$.
        \item 
            The Banach spaces with bounded (continous) maps.
        \item 
            The $k$-vector spaces with $k$-linear maps $\cat{Vect}_K$ or $R$-modules with $R$-linear maps $R\cat{-Mod}$.
    \end{itemize}
\end{example}
A category is called \emph{small} if its class of objects is a set.

\begin{defi}
	Let $\Aa$ and $\Bb$ be categories. We call $\Bb$
	\begin{itemize}
		\item a \defemph{subcategory} of $\Aa$ if $\Ob(\Bb) \subseteq \Ob(\Aa)$ and $\Hom_\Bb(X,Y) \subseteq \Hom_\Aa(X,Y)$ and for arbitrary objects $X,Y$ of $\Bb$, the identity $\id_X$ of $X$ in $\Aa$ is a morphism in $\Hom_\Bb(X,X)$.
		\item a \defemph{full subcategory} of $\Aa$ if additionally $\Hom_\Aa(X,Y) = \Hom_\Bb(X,Y)$ for arbitrary objects $X,Y\in\Ob(\Bb)$.
		\item an \defemph{equivalent subcategory} of $\Aa$ if it is a full subcategory and every object $X\in \Ob(\Aa)$ is isomorphic to some $Y\in\Ob(\Bb)$ (where a morphism $X\morphism[f] Y$ is an isomorphism iff there  is a (unique) $Y\morphism[g] X$ such that $f\circ g = \id_Y$ and $g\circ f= \id_X$.
	\end{itemize}
\end{defi}

  A further example is the category of prevarieties (with morphisms according to Definition \reff{def:preVarieties}) and its full subcategory of varieties, containing all varieties as objects.
  
  \begin{defi}
  	A (covariant) \defemph{functor} $\Aa\morphism[F]\Bb$ consists of the following data:
  	\begin{itemize}
  		\item a map $F\colon \Ob(\Aa)\to\Ob(\Bb)$,
  		\item for $X,Y\in\Ob(\Aa)$ a map $F\colon\Hom_\Aa(X,Y)\to\Hom_\Bb(FX,FY)$ such that $F(\id_X)=\id_{FX}$ whenever $X\in\Ob(\Aa)$ and $F(\psi\phi)=F(\psi)F(\phi)$ when $X\morphism[\phi]Y\morphism[\psi]Z$ are morphisms in $\Aa$.
  	\end{itemize}
  	A functor is called \emph{faithful} if $F:\Hom_\Aa(X,Y)\to\Hom_\Bb(FX,FY)$ is injective and \emph{fully faithful} if it's bijective.
  \end{defi}
    
  Professor Franke would like to draw a line here. We hope, this one will do: \tikz\draw(0,0) -- (2.6,0);.
  
  \begin{example*}
  	We have \emph{forgetful} functors like $\cat{Vect}_k\to\cat{Ab}$ or $\cat{Ab}\to\cat{Set}$. These functors are faithful (at least for the two examples).
  \end{example*}
  
  \section{Products and equalizers}
  Our goal is to formulate a notion of \emph{sheaf} that allows to define sheafs for arbitrary target categories. Recall that the sheaf axiom (\hyperref[sheafAxiom]{this one}) requires
  \begin{align}\lbl{eq:sheafAxiom}
  	\Gg(U)\longrightarrow\left\{(g_i)_{i\in I}\in\prod_{i\in I}\Gg(U_i)\st g_i|_{U_{ij}}=g_j|_{U_{ij}}\ \forall i,j\in I\right\}\tag{$*$}
  \end{align}
  to be bijective (i.e. an isomorphism) for any open cover $U=\bigcup_{i\in I}\Gg(U_i)$, where we set $U_{ij}=U_i\cap U_j$ for convenience.
  
  \begin{defi}[products]
  	A \defemph{product} of objects $(A_i)_{i\in I}$ of $\Aa$ is an object $\prod_{i\in I}A_i$ together with morphisms $\prod_{i\in I}A_i\morphism[\pi_i]A_i$ for each $i\in I$ such that the following \emph{universal property} holds:
  	\begin{quote}
  		If $T\in\Ob(\Aa)$ comes with morphisms $T\morphism[\tau_i]A_i$ for each $i\in I$, then there is a unique morhism $T\morphism[\exists!\ f]\prod_{i\in I}A_i$ such that $\tau_i=\pi_i\circ f$.
  	\end{quote}
  	In other words, $\prod_{i\in I}A_i=\limit[i\in I]{A_i}$ is the \emph{limiting cone} over the trivial diagram consisting only of the $A_i$ without any arrows.
  \end{defi}
  Note that nobody ever guaranteed that products exist in general.
  \begin{rem*}
  	\begin{alphanumerate}
  		\item Compare this to e.g. the universal property of localizations where the universal object is on the left -- here it is on the right.
  		\item In the case of sets, (abelian) groups, $R$-modules, and rings, one can take $\prod_{i\in I}A_i$ to be the set-theoretic product equipped with the respective product structure and the set-theoretic projections $\prod_{i\in I}A_i\morphism[\pi_i]A_i$, $\pi_i\big((a_j)_{j\in I}\big)=a_i$.
  		\item The above definition characterizes $\prod_{i\in I}A_i$ up to \emph{unique isomorphism}: If the $T$ above satisfies the same universal property, then $f$ is an isomorphism.
  		\item If $I=\emptyset$, the empty product is the \emph{final object}, i.e. an object $F\in\Ob(\Aa)$ such that for any $T\in\Ob(\Aa)$ there is precisely one morphism $T\to F$ in $\Aa$. We have the following dual notion: $I$ (now an object and no indexing set anymore) is called \emph{initial object} if $\Hom_\Aa(I,T)$ has precisely one element for each $T\in\Ob(\Aa)$.
  	\end{alphanumerate}
  \end{rem*}
  \begin{rem*}
  	In $\cat{Set}$, $\emptyset$ is the only initial object and the one-point sets are the final objects. For the \emph{abelian} categories $R\cat{-Mod}$, the canonical morphisms from the (only) initial to the (only) final object is an isomorphism.
  \end{rem*}
	Let $X$ be a topological space. A \emph{presheaf} on $X$ with values in $\Aa$ is a map associating
	\begin{itemize}
		\item to each open subset $U\subseteq X$ an object $\Gg(U)\in\Ob(\Aa)$
		\item and to each inclusion $V\subseteq U$ a morphism $(-)|_V^U\in\Hom_\Aa(\Gg(U), \Gg(V))$ which equals $\id_{\Gg(U)}$ if $U=V$ and such that $(-)|_W^U=(-)|_W^V\circ(-)|_V^U$ whenever $W\subseteq V\subseteq U$ is an inclusion of open sets.
	\end{itemize}
	To formulate the sheaf axiom, it is convenient to assume that $\prod_{i\in I}\Gg(U_i)$ exists, i.e. that $\Aa$ has arbitrary products.
	
	Recall our convention that $U_{ij}=U_i\cap U_j$. There are unique morphisms
	\begin{align*}
		\alpha,\beta\colon \prod_{i\in I}\Gg(U_i)\longrightarrow\prod_{(i,j)\in I\times I}\Gg(U_{ij})
	\end{align*}
	characterized by $\pi_{ij}\circ\alpha=(-)|_{U_{ij}}^{U_i}\circ\pi_i$ and $\pi_{ij}\circ\beta=(-)|_{U_{ij}}^{U_j}\circ\pi_j$, where $\prod_{i\in I}\Gg(U_i)\morphism[\pi_i]\Gg(U_i)$ and $\prod_{(i,j)\in I\times I}\Gg(U_{ij})\morphism[\pi_{ij}]\Gg(U_{ij})$ are the morphisms defining the product structure.
	
	In the example of presheaves of sets, rings, etc. we have 
	\begin{align*}
		\alpha\big((g_i)_{i\in I}\big)=\left(g_i|_{U_{ij}}\right)_{(i,j)\in I\times I}\quad\text{and}\quad\beta\big((g_i)_{i\in I}\big)=\left(g_j|_{U_{ij}}\right)_{(i,j)\in I\times I}\;,
	\end{align*}
	such that \eqreff{eq:sheafAxiom} is the ``largest subobject on which $\alpha$ and $\beta$ coincide".
	\begin{defi}[equalizer]
		Let $A\doublemorphism[\alpha][\beta]B$ be a pair of morphisms. An \defemph{equalizer} of this pair is an object $E\in\Ob(\Aa)$ together with a morphism $E\morphism[\epsilon]A$ such that $\alpha\epsilon=\beta\epsilon$ and such that the following universal property holds:
		\begin{quote}
			If $T\morphism[\tau]A$ is any morphism in $\Aa$ such that $\alpha\tau=\beta\tau$, then there's a unique $T\morphism[t]E$ such that the following diagram commutes.
			\begin{diagram}
				\node (A) at (0,0) {$A$};
				\node (B) at (3,0) {$B$};
				\node (E) at (1.5,1.5) {$E$};
				\node (T) at (1.5,3) {$T$};
				\scriptsize
				\draw[->,dashed] (T) -- (E) node[pos=0.5, right] {$\exists!\ t$};
				\draw[->, bend left] (A) to node[pos=0.5, below] {$\alpha$} (B) ;				
				\draw[->, bend right] (A) to node[pos=0.5, above] {$\beta$} (B) ;
				\draw[->] (E) -- (A) node[pos=0.5, above left] {$\epsilon$};
				\draw[->] (E) -- (B);
				\draw[->, bend right] (T) to node[pos=0.5, left] {$\tau$} (A);
				\draw[->, bend left] (T) to (B);
			\end{diagram}
			In other words, $E$ is the \emph{limiting cone} over the diagram $A\doublemorphism[\alpha][\beta]B$.
		\end{quote}
	\end{defi}
	\begin{rem*}
		\begin{alphanumerate}
			\item By the usual Yoneda argument one sees that the universal property characterizes $E$ up to unique isomorphism.
			\item The sheaf axiom for presheaves with values in an arbitrary category with products now translates into the condition that $\Gg(U)\to\prod_{i\in I}\Gg(U_i)$ is, for any open cover $U=\bigcup_{i\in I}U_i$, an equalizer of the above pair of morphisms $\prod_{i\in I}\Gg(U_i)\doublemorphism[\alpha][\beta]\prod_{(i,j)\in I\times I}\Gg(U_{ij})$. 
			
			By merging the universal properties, the notion of a sheaf can be generalized to arbitrary target categories.
			\item For sets, abelian groups etc. the equalizer is 
			\begin{align*}
				\ker\Big(A\doublemorphism[\alpha][\beta]B\Big)=\left\{a\in A\st \alpha(a)=\beta(a)\right\}\;.
			\end{align*}
			\item For the \emph{abelian} category $R\cat{-Mod}$, 
			\begin{align*}
				\ker\Big(M\morphism[f]N\Big)=\ker\Big(M\doublemorphism[f][0]N\Big)\quad\text{and}\quad\ker\Big(M\doublemorphism[f][g]N\Big)=\ker\Big(M\xrightarrow{f-g}N\Big)\;.
			\end{align*}
		\end{alphanumerate}
	\end{rem*}
	\begin{defi}[mono- and epimorphism]
		Let $\Aa$ be a category, $X\morphism[f] Y$ a morphism in $\Aa$. We say that $f$ is \defemph{monomorphism} (\defemph{epimorphism}) if for any object $T$ and any pair $T \doublemorphism[\alpha][\smash{\beta}] X$ (respectively $Y\doublemorphism[\smash{\alpha}][\beta] T$) with $f\alpha = f\beta$ (respectively $\alpha f= \beta f$) we get $\alpha =\beta$.
	\end{defi}
	
	\section{Functors, functor morphisms, and the Yoneda lemma}
	\begin{rem*}
        \begin{itemize}
          \item 
            If $\Aa\morphism[F] \operatorname{Set}$ is a faithful functor, then any morphism $f$ such that $Ff$ is injective (respectively surjective) then $f$ is a monomorphism (respectively epismorphism). 
          \item
            In the categories of sets or $R$-modules, $f$ is a monomorphism (epimorphism) iff $f$ is injective (surjective).
          \item
            In the category of Banach spaces and bounded linear maps, $f$ is a epimorphism iff its image is dense.
          \item
            The map from a domain to its field of quotients is an epimorphism in the category of rings.
        \end{itemize}
	\end{rem*}
	\begin{defi}[canonical morphism]\lbl{def:canonicalMorphism}
        Let $\Aa\doublemorphism[F][\smash{G}] \Bb$ be functors. A \defemph{functor morphism} or \defemph{canonical morphism} from $F$ to $G$ is a collection of morphisms $\smash{F(A) \morphism[\phi_A]G(A)}$, for all $A\in \Ob \Aa$ such that
       \begin{diagram}
	       	\node (FA) at (0,1.5) {$F(A)$};
	       	\node (FB) at (0,0) {$F(B)$};
	       	\node (GA) at (2.5,1.5) {$G(A)$};
	       	\node (GB) at (2.5,0) {$G(B)$};
	       	\scriptsize
	       	\draw[->] (FA) -- (FB) node[pos=0.5, left] {$F(\alpha)$};
	       	\draw[->] (FA) -- (GA) node[pos=0.5, above] {$\phi_A$};
	       	\draw[->] (GA) -- (GB) node[pos=0.5, right] {$G(\alpha)$};
	       	\draw[->] (FB) -- (GB) node[pos=0.5, above] {$\phi_B$};
       \end{diagram}
       commutes for arbitrary morphisms $A\morphism[\alpha] \Bb$ in $\Aa$.
    \end{defi}
    \begin{defi}[adjoint functors]\lbl{def:adjointFunctors}
        Let $\Aa$ and $\Bb$ be categories. An \defemph{adjoint pair of functors} 
        \begin{align*}
        	\Aa\doublelrmorphism[L][R]\Bb
        \end{align*}
        is a pair of functors of the specified type together with an isomorphism 
        \begin{align*}
        	\Hom_\Bb(LX, Y) \isomorphism \Hom_\Aa(X, RY)
        \end{align*}
        which in functorial in $X$ and $Y$. We may say that $L$ is left-adjoined to $R$ and that  $R$ is right adjoined to $L$. By Yoneda-style arguments, $RY$ is uniquely determined (up to unique morphism) by $L$ (and $Y$) if it exists, and $LX$ is uniquely determined by $R$ (and $X$) if it exists.
    \end{defi}
	\begin{lem}[Yoneda lemma for covariant functors]\lbl{lem:yoneda}
        For every $M\in\Ob \Aa$, let $\Cov_M\colon\Aa \morphism \cat{Set}$ be the functor defined by 
        \begin{align*}
            (\Cov_M(X)) = \Hom_\Aa(M,X)
        \end{align*}
        (one could write $\Cov_M=\Hom_\Aa(M,-)$ as well). Then 
        \begin{align*}
            \Hom_\Aa(M,N) \morphism[\Yy] \Hom_{[\Aa,\cat{Set}]} (\Cov_N, \Cov_M),
        \end{align*}
        where $[\Aa,\cat{Set}]$ denotes the category of functors from $\Aa$ to $\cat{Set}$ \emph{(cf. \cite[page~26]{alg1})}, is bijective. 
    \end{lem}
    \begin{rem*}
    	\begin{alphanumerate}
    		\item The image $\Yy(M\morphism[\mu]N)$ of $\mu\in\Hom_\Aa(M,N)$ under the Yoneda map $\Yy$ maps $N\morphism[\xi]X$ to $M\morphism[\mu]N\morphism[\xi]X$.
    		\item  We say that a functor $\Aa\morphism[F] \cat{Set}$ is \emph{representable} if there is a functor-isomorphism $F\simeq \Cov_M$, in other words $F(X) \simeq \Hom_\Aa(M,X)$. The Yoneda-Lemma shows that $M$ is unique up to unique isomorphism. For instance, $LX$ exists iff the covariant functor 
    		\begin{align*}
    			\Hom_\Aa(X,R(-))\colon\Bb&\morphism\cat{Set}\\
    			Y &\longmapsto \Hom_\Aa(X, RY)
    		\end{align*}
    		is representable.
    	\end{alphanumerate}
    \end{rem*}
	\begin{defi}\lbl{defi:contravariantFunctor}
		\begin{alphanumerate}
			\item If $\Aa$ is a category, its \defemph{opposite} or \defemph{dual category} $\Aa^\op$ is defined by  $\Ob(\Aa^\op) = \Ob(\Aa)$ and $\Hom_{\Aa^\op}(X,Y) = \Hom_\Aa(Y,X)$.
			\item A \defemph{contravariant functor} $\Aa\morphism[F]\Bb$ is a functor $\Aa^\op\morphism \Bb$. In other words, it consists of maps $\Ob(\Aa)\morphism[F]\Ob(\Bb)$ and $\Hom_\Aa(X,Y) \morphism[F] \Hom_\Bb(FY, FX)$ such that $F(\id_X) = \id_{F(X)}$ and $F(\beta\alpha)  = F(\alpha)F(\beta)$ where $X\morphism[\alpha]Y\morphism[\beta] Z$ are composable morphisms in $\Aa$.
		\end{alphanumerate}
	\end{defi}
	\begin{rem*}
        \begin{itemize}
          \item 
            Equivalently, a contravariant functor $\Aa\morphism \Bb$ is a covariant functor $\Aa\morphism \Bb^\op$.
          \item
            The map $V\morphism V^\ast$ (to the dual vector space) on the category of vector spaces over some fixed field $k$ is an example.
        \end{itemize}
	\end{rem*}
	\begin{lem}[Yoneda lemma, contravariant case] \lbl{lem:contraYoneda}
        For any $M\in\Ob \Aa$, $\Con_M(X) = \Hom_\Aa(X,M)$ defines a contravariant functor $\Con_M=\Hom_\Aa(-,M)\colon \Aa\morphism \cat{Set}$ and 
        \begin{align*}
            \Hom_\Aa(M,N) \morphism[\Yy] \Hom_{[\Aa^\op,\cat{Set}]}(\Con_M,\Con_N)
        \end{align*}
        is bijective, where $[\Aa^\op,\cat{Set}]$ is the category of functors from $\Aa^\op$ to $\cat{Set}$.
	\end{lem}
	\begin{rem*}
        \begin{alphanumerate}
	       \item 
	        The image $\Yy(M\morphism[\mu]N)$ of $\mu\in\Hom_\Aa(M,N)$ under the Yoneda map $\Yy$ maps $X\morphism[\xi]M\in\Con_M(X)$ to $X\morphism[\xi]M\morphism[\mu]N\in\Con_N(X)$.
          \item
            We say that a contravariant functor $\Aa\morphism[F]\cat{Set}$ is \emph{representable} iff $F\simeq \Con_M$ for some $M\in\Ob\Aa$ in which case we say that $M$ represents $F$. In the above Definition~\reff{def:adjointFunctors}, $RY$ exists iff 
            \begin{align*}
            	\Hom_\Bb(L(-), Y)\colon\Aa^\op&\morphism\cat{Set}\\
            	X&\mapsto \Hom_\Bb(LX,Y)
            \end{align*}
            is representable.
          \item 
            Many important constructions in algebraic topology (classifying spaces) and algebraic geometry (Moduli space, Picard/Hilbert schemes) amount to representing certain functors.
          \item 
            $L\colon\cat{PreShv}(\Bb) \morphism[(-)^\sh] \cat{Shv}(X)$ and $R\colon\cat{Shv} (X) \morphism[(-)|_\Bb] \cat{PreShv}(\Bb)$ is a pair of adjoint functors.
        \end{alphanumerate}
	\end{rem*}
\printbibliography

\end{document}          
