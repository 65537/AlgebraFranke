\documentclass[a4paper,parskip=half,numbers=enddot, DIV=12]{scrreprt}
\usepackage[utf8]{inputenc}

\usepackage{../header}
\usepackage{../frankenumbering}
\usepackage{../shortcuts}

\usepackage{csquotes}
%\usepackage{tikz-cd}%I cannot draw diagrams without it - Felix. %well, I can - Ferdinand
\usepackage[backend=biber,style=numeric,sorting=none]{biblatex}
\setcounter{biburlnumpenalty}{7000}
\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}
\addbibresource{../literatur.bib}

% Title Page
\title{Algebraic Geometry II}
\author{Ferdinand Wagner}
\date{Sommersemester 2018}

\displaywidowpenalty=8000
%\postdisplaypenalty=8000
\widowpenalty=8000
\clubpenalty=8000

\newcommand{\vC}{\v{C}}

\begin{document}
\pagenumbering{Alph}
\maketitle
\pagenumbering{roman}

\thispagestyle{plain}
This text consists of notes on the lecture Algebraic Geometry II, taught at the University of Bonn by Professor Jens Franke in the summer term (Sommersemester) 2018. 

Please report bugs, typos etc. through the \emph{Issues} feature of github.

\tableofcontents

\addchap{Introduction}
\pagenumbering{arabic}
This lecture will develop the cohomology of (quasi)coherent sheaves of modules. Professor Franke assumes familiarity with the contents of last term's Algebraic Geometry I. In particular, this includes the category of (pre)schemes, equalizers and fibre products of preschemes as well as in arbitrary categories and quasi-coherent $\Oo_X$-modules. If you are want to brush up your knowledge about these topics, the \href{https://github.com/Nicholas42/AlgebraFranke/tree/master/AlgGeoI}{\emph{lecture notes from Algebraic Geometry I}} \cite{alggeo1} might be your friend.

Professor Franke started the lecture with an example of sheaf cohomology entering the game. Let $X$ be a topological space, $\Cc_X$ the sheaf of continuous $\IC$-valued functions on $X$ and $\underline{\IZ}_X$ the sheaf of locally constant (i.e., continuous) functions on $X$ with values in $\IZ$. Then there is a short exact sequence
\begin{align*}
	0\morphism \underline{\IZ}_X\morphism[\cdot 2\pi\mathrm{i}] \Cc_X\morphism[\exp]\Cc_X^\times\morphism 0
\end{align*}
of sheaves of abelian groups. In general, taking global section doesn't preserve exactness but gives rise to a long exact sequence
\begin{diagram*}
	\node[ob] (0o) at (0,1.5) {$0$};
	\node[ob] (0u) at (0,0) {$0$};
	\node[ob] (H0Z) [right=0.5 of 0u] {$H^0(X,\underline{\IZ}_X)$};
	\node[ob] (H0CX) [right=0.5 of H0Z] {$H^0(X,\Cc_X)$};
	\node[ob] (H0CXx) [right=0.5 of H0CX] {$H^0(X,\Cc_X^\times)$};
	\node[ob] (Z) at (0o -| H0Z) {$\underline{\IZ}_X(X)$};
	\node[ob] (CX) at (0o -| H0CX) {$\Cc_X(X)$};
	\node[ob] (CXx) at (0o -| H0CXx) {$\Cc_X^\times(X)$};
	\node[ob, shift={(0,1.5)}] (H1Z) [right=0.75 of H0CXx] {$H^1(X,\underline{\IZ}_X)$};
	\node[ob] (H1CX) [right=0.5 of H1Z] {$H^1(X,\Cc_X)$};
	\node[ob] (dots) [right=0.5 of H1CX] {$\ldots$};
	\scriptsize
	\draw[->] (0o) -- (Z);
	\draw[->] (0u) -- (H0Z);
	\draw[->] (Z) -- (CX);
	\draw[->] (H0Z) -- (H0CX);
	\draw[->] (CX) -- (CXx);
	\draw[->] (H0CX) -- (H0CXx);
	\draw[->] (CXx) -- (H1Z) node[pos=0.5, above] {$d$};
	\draw[->] (H0CXx) -- (H1Z);
	\draw[->] (H1Z) -- (H1CX);
	\draw[->] (Z) -- (H0Z) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
	\draw[->] (CX) -- (H0CX) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
	\draw[->] (CXx) -- (H0CXx) node[pos=0.5, above=-0.25ex, sloped] {$\sim$};
	\draw[->] (H1CX) -- (dots);
\end{diagram*}
in which the $H^k(X,\underline{\IZ}_X)$, $H^k(X,\Cc_X)$, and $H^k(X,\Cc_X^\times)$ are \emph{sheaf cohomology groups}. There is the more general notion of \emph{derived functors} (Grothendieck, T\^{o}hoku paper), but this won't appear in the lecture.

Background in homological algebra is not required safe for cohomology groups of cochain complexes, the long exact cohomology sequence and the following famous lemma.
\begin{lem*}[Five lemma] Given a diagram
	\begin{diagram*}
		\node[ob] (A) at (0,1.5) {$A$};
		\node[ob] (B) at (1.5,1.5) {$B$};
		\node[ob] (C) at (3,1.5) {$C$};
		\node[ob] (D) at (4.5,1.5) {$D$};
		\node[ob] (E) at (6,1.5) {$E$};
		\node[ob] (A') at (0,0) {$A'$};
		\node[ob] (B') at (1.5,0) {$B'$};
		\node[ob] (C') at (3,0) {$C'$};
		\node[ob] (D') at (4.5,0) {$D'$};
		\node[ob] (E') at (6,0) {$E'$};
		\scriptsize
		\draw[->] (A) -- (B);
		\draw[->] (B) -- (C);
		\draw[->] (C) -- (D);
		\draw[->] (D) -- (E);
		\draw[->] (A') -- (B');
		\draw[->] (B') -- (C');
		\draw[->] (C') -- (D');
		\draw[->] (D') -- (E');
		\draw[->] (A) -- (A') node[pos=0.5, left] {$\alpha$};
		\draw[->] (B) -- (B') node[pos=0.5, left] {$\beta$};
		\draw[->] (C) -- (C') node[pos=0.5, left] {$\gamma$};
		\draw[->] (D) -- (D') node[pos=0.5, left] {$\delta$};
		\draw[->] (E) -- (E') node[pos=0.5, left] {$\epsilon$};
	\end{diagram*}
	of (abelian) groups/$R$-modules/etc.\ with exact rows, in which $\alpha$, $\beta$, $\delta$, and $\epsilon$ are isomorphisms, then $\gamma$ is an isomorphism as well.
\end{lem*}
\begin{proof}
	Easy diagram chase.
\end{proof}

\chapter{Cohomology of quasi-coherent sheaves of modules}
\section{Recollection of basic definitions and results}
\begin{defi}[{\cite[Definition~1.5.2 and Definition~1.5.9\itememph{b}]{alggeo1}}]
	\begin{alphanumerate}
		\item A \defemph{prescheme} (Franke uses ``EGA termology'') is a locally ringed space $(X,\Oo_X)$ which locally has the form $\Spec R$ for some rings $R$.
		\item A prescheme $X$ is called a \defemph{scheme}, if, for any prescheme $T$ and any pair of morphisms $T\doublemorphism[a][b]X$, the equalizer $\Eq\Big(T\doublemorphism[a][b]X\Big)$ is a closed subprescheme of $X$.
	\end{alphanumerate}
\end{defi}
\begin{rem*}
	Equivalently, a prescheme $X$ is a scheme iff the diagonal $\Delta\colon X\xrightarrow{(\id_X,\id_X)}X\times X$ is a closed immersion (cf.\ \cite[Fact~1.5.8]{alggeo1}). In other words, schemes are \emph{separated} preschemes
\end{rem*}
\begin{prop}
	If $U$ and $V$ are affine open subsets of a scheme $X$, then their intersection $U\cap V$ is again affine (and open of course).
\end{prop}
\begin{proof}
	This was proved in \cite[Proposition~1.5.4]{alggeo1}.
\end{proof}
	Note that open subsets of the form $\Spec(R_f)\simeq \Spec R\setminus V(f)$ form a topology base on $\Spec R$ and that the \emph{saturation} of $\{1,f,f^2,\ldots\}$ (i.e.\ the largest multiplicative subset of $R$ which still gives the same localization) depends only on $\Spec R\setminus V(f)$. Hence, for any $R$-module $M$, the localization $M_f$ depends (up to canonical isomorphism) only on $\Spec R\setminus V(f)$ and $M$. One defines a sheaf of modules $\snake{M}$ on $\Spec R$ as the sheafification of $\Spec (R_f)\mapsto M_f$. Then
	\begin{align*}
		\snake{M}(U)=\left\{(m_\pp)_{\pp\in U}\in\prod_{\pp\in U}M_\pp\st
		\begin{array}{c}
			\text{for every }\qq\in U\text{ there are }f\in R\setminus\qq\text{ and }\mu\in M_f\text{ such that}\\
			m_\pp=\left(\text{image of }\mu\text{ under }M_f\morphism M_\pp\right)\text{ for all }\pp\in\Spec (R_f)
		\end{array}
		\right\}
	\end{align*}
\begin{defi}[{\cite[Definition~1.4.2]{alggeo1}}]\lbl{def:QuasicoherentSpecR}
	A sheaf of modules $\Mm$ on $\Spec R$ is called \defemph{quasi-coherent} if $\Mm\simeq \snake{M}$ for some $R$-module $M$.
\end{defi}
\begin{defi}[{\cite[Definition~1.5.3]{alggeo1}}]
	A prescheme is called \defemph{quasi-compact} if the underlying topological space is quasi-compact and \defemph{quasi-separated} if the intersection of any two quasi-compact open subsets is quasi-compact.
\end{defi}

\begin{defi}[{\cite[Definition~1.5.4]{alggeo1}}]\lbl{def:Quasicoherent}
	Let $X$ be a prescheme. An $\Oo_X$-module $\Mm$ is called \defemph{quasi-coherent} if it satisfies the following equivalent conditions.
	\begin{alphanumerate}
		\item $X$ may be covered by affine open subsets $U$ such that $\Mm|_U$ is quasi-coherent in the sense of Definition~\reff{def:QuasicoherentSpecR}.
		\item For any affine open $U\subseteq X$, $\Mm|_U$ is quasi-coherent.
		\item For any quasi-compact and quasi-separated open $U\subseteq X$ and $f\in\Oo_X(U)$, the canonical morphism
		\begin{align}\lbl{eq:qcIso}
		\Mm(U)_f\morphism\Mm(U\setminus V(f))
		\end{align}
		(coming from the universal property of localization) is an isomorphism.
		\item The morphism \eqreff{eq:qcIso} is an isomorphism when $U$ is quasi-compact and quasi-separated and injective when $U$ is only quasi-compact.
		\item When $U\subseteq X$ is affine, the canonical morphism
		\begin{align}\lbl{eq:qcIso2}
		\Mm(U)_{\pp_x}\morphism\Mm_x
		\end{align}
		is an isomorphism for all $x\in U$, where $\pp_x=\left\{f\in\Oo_X(U)\st x\in V(f)\right\}$ is the prime ideal in $\Spec \Oo_X(U)$ corresponding to $x$.
	\end{alphanumerate}
\end{defi}
\begin{rem*}
	To be fair: Despite Professor Franke's usual fondness of proving definitions (or rather stating definitions in a way they need a proof), the equivalence of \itememph{a} to \itememph{d} wasn't proposed as a definition in Algebraic Geometry I. 
\end{rem*}
\begin{proof}[Proof of Definition~\reff{def:Quasicoherent}]
	 The equivalence of  \itememph{a} to \itememph{d} was proved in \cite[Proposition~1.5.1]{alggeo1}, but property \itememph{e} is something we haven't seen yet. Recall the \emph{adjunction} (cf.\ Definition~\reff{def:AdjointFunctors})
	\begin{align}\lbl{eq:ROXAdjunction}
		\Hom_{\Oo_{\Spec R}}(\snake{M}, \Nn)\isomorphism\Hom_R(M,\Nn(\Spec R))
	\end{align}
	for $M$ an $R$-module and $\Nn$ a sheaf of $\Oo_{\Spec R}$-modules (cf.\ \cite[Proposition~1.4.3]{alggeo1}). When \eqreff{eq:qcIso2} is an isomorphism for all $x\in U\simeq\Spec R$, it follows that the canonical morphism $\snake{M}\morphism\Mm|_U$ (with $M=\Mm(U)$) coming from \eqreff{eq:ROXAdjunction} is an isomorphism on stalks, hence an isomorphism. This shows \itememph{e} $\Rightarrow$ \itememph{b}.
	
	Conversely, if \itememph{b} holds, then $\snake{M}\morphism\Mm|_U$ (with $M=\Mm(U)$) is an isomorphism for all affine open $U\subseteq X$, hence induces isomorphisms on stalks, which shows \itememph{b} $\Rightarrow$ \itememph{e}. Hence, \itememph{e} is equivalent to the other properties.
\end{proof}

Let $\Aa$ be the category $R\cat{-Mod}$ and $\Bb$ be $\Oo_{\Spec R}\cat{-Mod}$, then the functor $L$ given by $M\mapsto\snake{M}$ and the functor $\Mm\mapsto\Mm(\Spec R)$ are an adjoint pair of functors by \eqreff{eq:ROXAdjunction}. It follows that $L$ commutes with cokernels and coproducts. In particular, the full subcategory $\cat{QCoh}(X)\subseteq\Oo_X\cat{-Mod}$ of quasi-coherent $\Oo_X$-modules is closed under taking cokernels and direct sums for $X=\Spec R$, and by locality of quasi-coherentness this holds for all preschemes $X$.
\begin{defi}[{\cite[Definition~2.1.1 and Definition~2.1.2]{alggeo1}}]
	A morphism $X\morphism[f]Y$ of preschemes is \defemph{quasi-compact} if it satisfies the following equivalent conditions.
	\begin{alphanumerate}
		\item For quasi-compact open $U\subseteq Y$, $f^{-1}(U)$ is quasi-compact.
		\item For affine open $U\subseteq Y$, $f^{-1}(U)$ is quasi-compact.
		\item One can cover $Y$ by affine open $U$ such that $f^{-1}(U)$ is quasi-compact.
	\end{alphanumerate}
	It is called \defemph{quasi-separated} if it satisfies the following equivalent conditions.
	\begin{alphanumerate}\setcounter{enumi}{3}
		\item For an open quasi-separated $U\subseteq Y$, $f^{-1}(U)$ is quasi-separated again.
		\item For affine open subsets $U\subseteq Y$, $f^{-1}(U)$ is quasi-separated.
		\item It is possible to cover $Y$ by affine open $U$ such that $f^{-1}(U)$ is quasi-separated.
	\end{alphanumerate}
\end{defi}
\begin{proof}
	Equivalence was proved in \cite[Fact~2.1.1]{alggeo1} for quasi-compactness and \cite[Lemma~2.1.1]{alggeo1} for quasi-separatedness.
\end{proof}

\begin{prop}
	If $X\morphism[f]Y$ is quasi-compact and quasi-separated morphism of preschemes and $\Mm\in\Ob(\cat{QCoh}(X))$, then $f_*\Mm\in\Ob\left(\cat{QCoh}\right)$.
\end{prop}
\begin{proof}
	This is \cite[Proposition~1.5.2\itememph{b}]{alggeo1}.
\end{proof}
\begin{prop}
	\begin{alphanumerate}
		\item \lbl{prop:QCohHasKerCoker}The full subcategory $\cat{QCoh}(X)\subseteq\Oo_X\cat{-Mod}$ of quasi-coherent $\Oo_X$-modules on a prescheme $X$ is closed under taking kernels and cokernels of morphisms and under taking (finite) direct sums.
		\item If $\Mm$ is a quasi-coherent $\Oo_X$-module and $U\subseteq X$ open, then $\Mm|_U\in\Ob\left(\cat{QCoh}(U)\right)$.
	\end{alphanumerate}
\end{prop}
\begin{proof}
	Part \itememph{a}. For cokernels and finite direct sums (which are finite coproducts since $\Oo_X\cat{-Mod}$ is an abelian category by Proposition~\reff{prop:RmodAbelian}), consider the case $X=\Spec R$ first. Then $R\cat{-Mod}\morphism[L]\Oo_X\cat{-Mod}$, $M\mapsto\snake{M}$ and $\Oo_X\cat{-Mod}\morphism R\cat{-Mod}$, $\Mm\mapsto\Mm(X)$ are adjoint functors by \eqreff{eq:ROXAdjunction}. By Remark~\reff{rem:AdjunctionPreservesStuff}, $L$ preserves cokernels and coproducts. By locality of quasi-coherentness, this follows for all preschemes $X$.
	
	Closedness under taking kernels was proved in \cite[Fact~1.5.3]{alggeo1}. It's worth pointing out that in fact, the proof given there shows that $M\mapsto\snake{M}$ preserves kernels as well. 
	
	Part \itememph{b} follows immediately from (e.g.) Definition~\reff{def:Quasicoherent}\itememph{b}.
\end{proof}
\begin{cor}\lbl{cor:kerAndCokerForQcModules}
	Let $X$ be a prescheme, $\Mm\morphism[f]\Nn$ a morphism of quasi-coherent $\Oo_X$-modules and $U\subseteq X$ open, then
	\begin{align*}
		\ker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)\simeq\ker(f)(U)\;.
	\end{align*}
	If $U$ is, in addition, affine, then
	\begin{align*}
		\coker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)\simeq\coker(f)(X)\;.
	\end{align*}
\end{cor}
\begin{proof}
	The first assertion holds by our explicit construction of $\ker(f)$ in Lemma~\reff{lem:RModHasKernels}. For the second one, we may assume $X=U=\Spec R$. Denoting $M=\Mm(X)$, $N=\Nn(X)$, then
	\begin{align*}
		\coker\Big(\Mm\morphism[f]\Nn)=\coker\Big(\snake{M}\morphism[f]\snake{N}\Big)=\Big(\coker\Big(M\morphism[f]N\Big)\Big)^\sim
	\end{align*}
	as $M\mapsto\snake{M}$ preserves cokernels.
\end{proof}
\begin{cor}
	Let $0\morphism\Mm'\morphism\Mm\morphism\Mm''\morphism0$ be a short exact sequence of quasi-coherent $\Oo_X$-modules on a prescheme $X$ and $U\subseteq X$ be affine open, then 
	\begin{align*}
		0\morphism\Mm'(U)\morphism\Mm(U)\morphism\Mm''(U)\morphism 0
	\end{align*}
	is exact as well.
\end{cor}
\begin{proof}
	Follows from Corollary~\reff{cor:kerAndCokerForQcModules}.
\end{proof}
\begin{rem*}
	It turns out to be sufficient to assume that two of the above three sheaves $\Mm',\Mm,\Mm''$ are quasi-coherent. Indeed, we proved in Proposition~\reff{prop:QCohHasKerCoker} that kernels and cokernels of morphisms between quasi-coherent sheaves are quasi-coherent again, so the only case in question is where $\Mm$ is not required to be quasi-coherent. This case, however, will be treated by cohomological methods.
\end{rem*}
Our plan is to associate to any quasi-coherent $\Oo_X$-module on a scheme $X$ \emph{cohomology groups} $H^i(X,\Mm)$ such that
\begin{itemize}
	\item $H^0(X,\Mm)\simeq\Mm(X)$.
	\item when $0\morphism\Mm'\morphism\Mm\morphism\Mm''\morphism0$ is an exact sequence of $\Oo_X$-modules, we have a canonical long exact sequence
	\begin{multline*}
		0\morphism H^0(X,\Mm')\morphism H^0(X,\Mm)\morphism H^0(X,\Mm'')\\
		\morphism[d] H^1(X,\Mm')\morphism H^1(X,\Mm)\morphism H^1(X,\Mm'')\morphism[d]H^2(X,\Mm')\morphism\ldots
	\end{multline*}
\end{itemize}
But before we do this, we to introduce the notion of \emph{coherent} $\Oo_X$-modules.
\begin{prop}
	If $X$ is a prescheme, associating to (the isomorphism class of) a closed embedding $Y\morphism[i]X$ the sheaf of ideals $\Jj=\ker\Big(\Oo_X\morphism[i^*]i_*\Oo_X\Big)$ gives a bijection between the set of closed subpreschemes of $X$ and the quasi-coherent sheaves of ideals in $\Oo_X$.
\end{prop}
\begin{proof}
	This is \cite[Proposition~1.5.3]{alggeo1}.
\end{proof}
\begin{lem}\lbl{lem:locFinGen}
	For a quasi-coherent $\Oo_X$-module $\Mm$ on a prescheme $X$, the following conditions are equivalent.
	\begin{alphanumerate}
		\item For any affine open $U\subseteq X$, $\Mm(U)$ is a finitely generated $\Oo_X(U)$-module.
		\item It is possible to cover $X$ by affine open subsets $U\subseteq X$, for which $\Mm(U)$ is a finitely generated $\Oo_X(U)$-module.
	\end{alphanumerate}
\end{lem}
\begin{proof}
	This will follow from Lemma~\reff{lem:localProperty} and Lemma~\reff{lem:FinitelyGeneratedLocal} below.
\end{proof}
\begin{lem}\lbl{lem:localProperty}
	Let $\Pp$ be a property of affine open subsets of a prescheme $X$ such that
	\begin{alphanumerate}
		\item[\itememph{\alpha}] If $U\subseteq X$ is affine and $f\in\Oo_X(U)$, then $\Pp(U)$ implies $\Pp(U\setminus V(f))$.
		\item[\itememph{\beta}] If $U$ is affine and $f_1,\ldots,f_n\in\Oo_X(U)$ are such that $\bigcap_{i=1}^nV(f_i)=\emptyset$ and such that $\Pp(U\setminus V(f_i))$ holds for all $i=1,\ldots,n$, then $\Pp(U)$ holds.
	\end{alphanumerate}
	Then the following assertions about $X$ are equivalent.
	\begin{alphanumerate}
		\item If $U\subseteq X$ is affine open, $\Pp(U)$ holds.
		\item $X$ may be covered by affine open $U$ for which $\Pp(U)$ holds.
	\end{alphanumerate}
\end{lem}
\begin{proof}
	We proved this in \cite[Lemma~2.2.2]{alggeo1}.
\end{proof}
\begin{lem}
	\begin{alphanumerate}
		\item \lbl{lem:FinitelyGeneratedLocal}If $M$ is a finitely generated $R$-module, then $M_f$ is a finitely generated $R_f$-module.
		\item If $M$ is an $R$-module and $f_1,\ldots,f_n\in R$ such that $\bigcap_{i=1}^nV(f_i)=\emptyset$ in $\Spec R$ and such that $M_{f_i}$ is finitely generated over $R_{f_i}$, then $M$ is finitely generated over $R$.
	\end{alphanumerate}
\end{lem}
\begin{proof}
	Part \itememph{a} is trivial, as the images of $R$-generators of $M$ in $M_f$ generate it as an $R_f$-module.
	
	Now for part \itememph{b}. As $M_{f_i}$ is finitely generated over $R_{f_i}$, there are $k\in\IN$ and $m_{i,j}\in M$, $j=1,\ldots,N_i$ such that $m_{i,j}f^{-k}$ generate $M_{f_i}$ over $R_{f_i}$ (as there are only finitely many generators, we can choose a common exponent $k$ for all of them). Then also the $m_{i,j}$ generate $M_{f_i}$ since $f_i$ is a unit in $R_{f_i}$. We claim that the $\left\{m_{i,j}\st i=1,\ldots, n\text{ and }j=1,\ldots, N_i\right\}$ generate $M$ as an $R$-module. Indeed, let $m\in M$, then
	\begin{align*}
		m=\sum_{j=1}^{N_i}\frac{r_{i,j}}{f_i^\ell}m_{i,j}\quad\text{in }M_{f_i}\;,
	\end{align*}
	where $r_{i,j}\in R$ and $\ell\in\IN$ (again, we can choose a common exponent $\ell$). Then there is some $\ell'\in \IN$ such that
	\begin{align*}
		f_i^{\ell+\ell'}m=\sum_{j=1}^{N_i}r_{i,j}f_i^{\ell'}m_{i,j}\quad\text{in }M\;.
	\end{align*}
	Replacing $\ell$ by $\ell+\ell'$ and $r_{i,j}$ by $f_i^{\ell'}r_{i,j}$ we may assume $\ell'=0$, i.e.
	\begin{align*}
		f_i^{\ell}m=\sum_{j=1}^{N_i}r_{i,j}m_{i,j}\quad\text{in }M\;.
	\end{align*}
	We now have $\bigcap_{i=1}^nV(f_i^\ell)=\bigcap_{i=1}^nV(f_i)=\emptyset$, hence the ideal generated by the $f_i^\ell$ is $R$ and we thus find $g_1,\ldots,g_n\in R$ such that $\sum_{i=1}^{n}f_i^\ell g_i=1$ in $R$. It follows that
	\begin{align*}
		m=\sum_{i=1}^nf_i^\ell g_im=\sum_{i=1}^{n}\sum_{j=1}^{N_i}r_{i,j}g_im_{i,j}
	\end{align*}
	is an element of the submodule generated by the $m_{i,j}$.
\end{proof}
\begin{defi}
	\begin{alphanumerate}
		\item We call a quasi-coherent $\Oo_X$-module \defemph{locally finitely generated} it it satisfies the equivalent conditions from Lemma~\reff{lem:locFinGen}.
		\item When $X$ is locally Noetherian (cf. \cite[Definition~2.2.2]{alggeo1}), an $\Oo_X$-module is called \defemph{coherent} if it is quasi-coherent and locally finitely generated.
	\end{alphanumerate}
\end{defi}
\begin{rem*}
	There is a general definition of \emph{coherent} sheaves of modules on arbitrary ringed spaces, which in the case of a locally Noetherian prescheme is equivalent to the above.
\end{rem*}

\section{\vC ech cohomology}
\begin{defi}
	Let $\Uu\colon X=\bigcup_{i\in I}U_i$ be an open cover of a topological space $X$ (e.g., a prescheme) and let $\Mm$ be a presheaf of abelian groups (e.g., a quasi-coherent $\Oo_X$-module) on $X$.  Let always
	\begin{align}\lbl{eq:capConvention}
		U_{i_0,\ldots,i_n}=\bigcap_{k=0}^nU_{i_k}\;.
	\end{align}
	The \defemph{\vC ech complex} $\check{C}^*(\Uu,\Mm)$ is the cochain complex defined as follows. Let
	\begin{align*}
		\check{C}^n(\Uu,\Mm)\coloneqq\prod_{(i_0,\ldots,i_n)\in I^{n+1}}\Mm(U_{i_0,\ldots,i_n})\;.
	\end{align*}
	Let the elements of $\check{C}^n(\Uu,\Mm)$ be denoted $\psi=(\psi_{i_0,\ldots,i_n})_{(i_0,\ldots,i_n)\in I^{n+1}}$. The differentials $\check{C}^n(\Uu,\Mm)\morphism[\check{d}^n]\check{C}^{n+1}(\Uu,\Mm)$ are defined by
	\begin{align*}
		(\check{d}^n\psi)_{i_0,\ldots,i_{n+1}}=\sum_{j=0}^{n+1}(-1)^j\psi_{i_0,\ldots,\hat{i}_j,\ldots,i_{n+1}}|_{U_{i_0,\ldots,i_{n+1}}}
	\end{align*}
	where $\hat{i}_j$ denotes the omission of the index $i_j$. For instance,
	\begin{align*}
		(\check{d}^0\psi)_{i,j}=\psi_j|_{U_{i,j}}-\psi_i|_{U_{i,j}}\quad\text{and}\quad (\check{d}^1\psi)_{i,j,k}=\psi_{j,k}|_{U_{i,j,k}}-\psi_{i,k}|_{U_{i,j,k}}+\psi_{i,j}|_{U_{i,j,k}}\;.
	\end{align*}
	The \defemph{\vC ech cohomology} $\check{H}^*(\Uu,\Mm)$ is defined as the cohomology of the \vC ech complex, i.e.,
	\begin{align*}
		\check{H}^i(\Uu,\Mm)=H^i\left(\check{C}^*(\Uu,\Mm)\right)\;.
	\end{align*}	
\end{defi}
\begin{proof}[We need to prove $\check{d}^2=0$ and we won't do this in a remark]
	The fact that this is indeed a cochain complex may be verified as follows. For $\ell=0,\ldots,n+1$ let $\check{C}^n(\Uu,\Mm)\morphism[d_\ell]\check{C}^{n+1}(\Uu,\Mm)$ be given by
	\begin{align*}
		(d_\ell\psi)_{i_0,\ldots,i_{n+1}}=\psi_{i_0,\ldots,\hat{i}_\ell,\ldots,i_{n+1}}|_{U_{i_0,\ldots,i_{n+1}}}\;.
	\end{align*}
	\emph{Step 1.} We prove that
	\begin{align}\lbl{eq:simplicialStuff}
		d_md_\ell=d_{\ell+1}d_m\quad\text{when }\ell\geq m\;.
	\end{align}
	Indeed, we have $(d_md_\ell\psi)_{\boldsymbol{i}}=\psi_{\boldsymbol{j}}|_{U_{\boldsymbol{i}}}$, where $\boldsymbol{j}$ is obtained from $\boldsymbol{i}$ by omitting the indices $i_\ell$ and $i_m$ when $\ell<m$ and the indices $i_{\ell+1}$ and $i_m$ when $\ell\geq m$. The assertion follows.
	
	\emph{Step 2.} We prove the following. Let $C^*$ is any family of abelian groups (or objects of an abelian category) and $C^n\morphism[d_\ell]C^{n+1}$ morphisms for $\ell=0,\ldots,n+1$. Suppose that $C^n=0$ for $n<0$ and that \eqreff{eq:simplicialStuff} holds. Then $d=\sum_{i=0}^{n+1}(-1)^id_i$ satisfies $d^2=0$. 
	
	Indeed,
	\begin{align*}
		d^2&=\sum_{m=0}^{n+2}\sum_{\ell=0}^{n+1}(-1)^{\ell+m}d_md_\ell=\sum_{m=0}^{n+2}\sum_{\ell=0}^{m-1}(-1)^{\ell+m}d_md_\ell+\sum_{m=0}^{n+2}\sum_{\ell=m}^{n+1}(-1)^{\ell+m}d_md_\ell\\
		&=\sum_{m=0}^{n+2}\sum_{\ell=0}^{m-1}(-1)^{\ell+m}d_md_\ell+\sum_{m=0}^{n+1}\sum_{\ell=m}^{n+1}(-1)^{\ell+m}d_{\ell+1}d_m\\
		&=\sum_{i>j}(-1)^{i+j}d_id_j+\sum_{i>j}(-1)^{i+j-1}d_id_j=0\;,
	\end{align*}
	as required.
\end{proof}
\begin{rem*}
	Our program is to show that $\check{H}^*(\Uu,\Mm)$ is independent of $\Uu$ and has the desired properties, when $X$ is a scheme, $\Mm\in\Ob(\cat{QCoh}(X))$ and $\Uu$ is an affine open cover.
\end{rem*}
\begin{rem*}
	For instance, the cohomology of $\IP_R^1=\Proj(R[X_0,X_1])$ can be calculated using the affine open cover 
	\begin{align*}
		U_i=\IP_R^1\setminus V(X_i)\simeq \Spec \left(R[X_0,X_1]_{X_i}\right)_0\simeq \Spec R[t_i]\quad\text{where }t_i=
		\begin{cases}
			X_1\cdot X_0^{-1} & \text{if }i=0\\
			X_0\cdot X_1^{-1} & \text{if }i=1
		\end{cases}\;.
	\end{align*}
	Unfortunately, calculations become complicated by the fact that there are infinitely many non-zero terms in $\check{C}^*(\Uu,\Mm)$.
\end{rem*}

\appendix
\chapter{Appendix -- category theory corner}
\setcounter{thm}{0}
\renewcommand*{\thethm}{\Alph{thm}}
\section{Towards abelian categories}
\begin{defi}
	\begin{alphanumerate}
		\item \lbl{def:additiveCategory}A \defemph{pointed} category is a category with initial and final objects, such that the canonical (unique) morphism from the initial to the final object is an isomorphism.
		\item An \defemph{additive} category $\Aa$ is a pointed category which has a product $X\times Y$ (i.e., a fibre product over the final object $*$) and coproduct $X\amalg Y$ (i.e., a dual fibre product with respect to the initial object $*$) such that the canonical morphism $X\amalg Y\morphism X\times Y$ is an isomorphism for all objects $X,Y\in\Ob(\Aa)$ and such that the resulting addition law on $\Hom_\Aa(X,Y)$ defines a group structure for all $X,Y\in\Ob(\Aa)$.
	\end{alphanumerate}
\end{defi}
\begin{rem*}
	 \begin{alphanumerate}
	 	\item When $\Aa$ is a pointed category and $X,Y\in\Ob(\Aa)$, let the \emph{zero morphism} (which we denote $0$) $X\morphism[0]Y$ be defined by $X\morphism *\morphism Y$, where $*$ is the both initial and final object.
	 	\item We will construct the canonical morphism $X\amalg Y\morphism[c]X\times Y$ from Definition~\reff{def:additiveCategory}\itememph{b}. The product $X\times Y$ comes with canonical projections $X\lmorphism[p_1]X\times Y\morphism[p_2]Y$ such that given morphisms $T\morphism[\xi]X$ and $T\morphism[\upsilon]Y$ there is a unique $T\morphism[\xi\times\upsilon]X\times Y$ such that
	 	\begin{diagram*}
	 		\node (XY) at (0,0) {$X\times Y$};
	 		\node (X) at (-1,1.25) {$X$};
	 		\node (Y) at (-1,-1.25) {$Y$};
	 		\node (T) at (2.5,0) {$T$};
	 		\scriptsize
	 		\draw[->] (XY) -- (X) node[pos=0.5, above right] {$p_1$};
	 		\draw[->] (XY) -- (Y) node[pos=0.5, below right] {$p_2$};
	 		\draw[->, dashed] (T) -- (XY) node[pos = 0.5, above] {$\exists!\ \xi\times \upsilon$};
	 		\draw[->, bend right] (T) to node[pos=0.5,below left] {$\xi$} (X);
	 		\draw[->, bend left] (T) to node[pos=0.5,above left] {$\upsilon$} (Y);
	 	\end{diagram*}
	 	commutes.
	 	
	 	Similarly, the coproduct $X\amalg Y$ has morphisms $X\morphism[i_1]X\amalg Y\lmorphism[i_2]Y$ such that given morphisms $X\morphism[\xi]T$ and $Y\morphism[\upsilon]T$ there is a unique morphism $X\amalg Y\morphism[\xi\amalg\upsilon]T$ such that
	 	\begin{diagram*}
	 		\node (XY) at (0,0) {$X\amalg Y$};
	 		\node (X) at (-1,1.25) {$X$};
	 		\node (Y) at (-1,-1.25) {$Y$};
	 		\node (T) at (2.5,0) {$T$};
	 		\scriptsize
	 		\draw[<-] (XY) -- (X) node[pos=0.5, above right] {$i_1$};
	 		\draw[<-] (XY) -- (Y) node[pos=0.5, below right] {$i_2$};
	 		\draw[->, dashed] (XY) -- (T) node[pos = 0.5, above] {$\exists!\ \xi\amalg \upsilon$};
	 		\draw[<-, bend right] (T) to node[pos=0.5,below left] {$\xi$} (X);
	 		\draw[<-, bend left] (T) to node[pos=0.5,above left] {$\upsilon$} (Y);
	 	\end{diagram*}
	 	commutes.
	 	
	 	Using the universal property of $X\times Y$, we get a unique morphism $X\morphism[\alpha]X\times Y$ such that $p_1\alpha=\id_X$, $p_2\alpha=0$ and a unique morphism $Y\morphism[\beta]X\times Y$ such that $p_1\beta=0$ and $p_2\beta=\id_Y$. Then 
	 	\begin{align*}
	 		c\colon X\amalg Y\xrightarrow{\alpha\amalg\beta}X\times Y
	 	\end{align*}
	 	is the morphism we are looking for. It is unique with the property that $p_1 c i_1=\id_X$, $p_1 c i_2=0$, $p_2 c i_1=0$, and $p_2 c i_2=\id_Y$.
	 	\item For abelian groups and modules over a ring, both $X\amalg Y$ and $X\times Y$ are given by $\left\{(x,y)\st x\in X,\ y\in Y\right\}$ with component-wise operations and $p_1(x,y)=x$, $p_2(x,y)=y$, $i_1(x)=(x,0)$, and $i_2(y)=(0,y)$.
	 	\item For an additive category $\Aa$, it follows that finite products $\prod_{i=1}^nX_i$ and coproducts $\coprod_{i=1}^nX_i$ (of some objects $X_1,\ldots,X_n\in\Ob(\Aa)$) exist and are canonically isomorphic. We typically denote both by $\bigoplus_{i=1}^nX_i$ in that case.
	 	\item We would like to describe the addition on $\Hom_\Aa(X,Y)$. For a pair of morphisms $X\doublemorphism[a][b]Y$ we denote the composition
	 	\begin{align*}
	 		X\xrightarrow{\id_X\times\id_X}X\oplus X\xrightarrow{a\amalg b}Y
	 	\end{align*}
	 	by $a+b$. Then $0$ is a neutral element and associativity holds, but the existence of inverse elements needs to be imposed to obtain indeed a group structure.
	 	\item It is, however, automatically abelian. What we need to show is $(a\amalg b)\circ\Delta=(b\amalg a)\circ\Delta$ with $\Delta=\id_X\times \id_X$. The universal property of coproducts gives a unique $X\oplus X\morphism[\sigma]X\oplus X$ such that
	 	\begin{diagram*}
	 		\node (XX2) at (0,0) {$X\oplus X$};
	 		\node (X1) at (-1,1.25) {$X$};
	 		\node (X2) at (-1,-1.25) {$X$};
	 		\node (XX1) at (-2,0) {$X\oplus X$};
	 		\node (Y) at (2.5,0) {$Y$};
	 		\scriptsize
	 		\draw[<-] (XX2) -- (X1) node[pos=0.5, above right] {$i_1$};
	 		\draw[<-] (XX2) -- (X2) node[pos=0.5, below right] {$i_2$};
	 		\draw[->] (XX2) -- (Y) node[pos = 0.5, above] {$a\amalg b$};
	 		\draw[<-, bend right] (Y) to node[pos=0.5,below left] {$a$} (X1);
	 		\draw[<-, bend left] (Y) to node[pos=0.5,above left] {$b$} (X2);
	 		\draw[<-] (XX1) -- (X1) node[pos=0.5, above left] {$i_2$};
	 		\draw[<-] (XX1) -- (X2) node[pos=0.5, below left] {$i_1$};
	 		\draw[->, dashed] (XX1) -- (XX2) node[pos=0.5, above] {$\exists!\ \sigma$};
	 	\end{diagram*}
	 	commutes. Then $\sigma$ is easily seen to be an isomorphism and $b\amalg a=(a\amalg b)\circ \sigma$ by the uniqueness of $b\amalg a$. It thus suffices to show $\sigma\Delta=\Delta$. By the uniqueness of $\Delta$, this is equivalent to $p_1\sigma\Delta=\id_X$ and $p_2\sigma\Delta=\id_X$. We claim that $p_1\sigma=p_2$ and vice versa, which would finish the proof. To see this, note that $p_1\sigma=p_2$ is equivalent to $p_1\sigma i_1=p_2i_1=0$ and $p_1\sigma i_2=p_2i_2=\id_X$ by the universal property of the coproduct $X\oplus X$. This follows from $\sigma i_1=i_2$ and $\sigma i_2=i_1$ by definition of $\sigma$.
	 \end{alphanumerate}
\end{rem*}
\begin{example*} The following are additive categories.
	\begin{alphanumerate}
		\item Modules over a given ring $R$ (in particular, abelian groups).
		\item Sheaves of modules.
		\item Banach spaces with bounded linear maps as morphisms. The common initial and final object is the zero space and $A\oplus B=\left\{(a,b)\st a\in A,\ b\in B\right\} $ with $\max\{\|a\|,\|b\|\}$ or $\|a\|+\|b\|$ as norm (this category will turn out not to be abelian).
		\item Free or projective modules over a ring $R$.
	\end{alphanumerate}
\end{example*}
\begin{defi}\lbl{def:Kernel}
	Let $A\morphism[\alpha]B$ be a morphism in an additive category $\Aa$. The \defemph{kernel} $\ker(A\morphism[\alpha]B)$ of $\alpha$ (if it exists) comes with a morphism $\ker(\alpha)\morphism[\iota]A$ satisfying the universal property
	\begin{align*}
	\Hom_\Aa\left(T,\ker\Big(A\morphism[\alpha]B\Big)\right)&\isomorphism \left\{f\in \Hom_\Aa\st \alpha f=0\right\}\\
	\left(T\morphism[\tau]A\right)&\longmapsto f=\iota\tau
	\end{align*}
	for any test object $T\in\Ob(\Aa)$. 
\end{defi}
\begin{varthm}{defi}\lbl{def:Cokernel}
	Similarly, the \defemph{cokernel} of $\alpha$ (if existent) comes with a morphism $B\morphism[\pi]\coker(\alpha)$ and satisfies
	\begin{align*}
	\Hom_\Aa\left(\coker\Big(A\morphism[\alpha]B\Big),T\right)&\isomorphism \left\{g\in\Hom_\Aa(B,T)\st g\alpha=0\right\}\\
	\left(\coker(\alpha)\morphism[\tau]T\right)&\longmapsto g=\tau\pi
	\end{align*}
	for any test object $T\in\Ob(\Aa)$.
\end{varthm}
	
	
\begin{rem}\lbl{rem:KernelCokernel}
	Kernels and cokernels in an additive category $\Aa$ are special cases of \emph{equalizers} and \emph{coequalizers} (cf.\ \cite[Definition~A.3.2 and Definition~A.3.4]{alggeo1}), respectively. Indeed, we have
	\begin{align*}
		\ker\Big(A\morphism[\alpha]B\Big)=\Eq\Big(A\doublemorphism[\alpha][0]B\Big)\quad\text{and}\quad\coker\Big(A\morphism[\alpha]B\Big)=\Coeq\Big(A\doublemorphism[\alpha][0]B\Big)\;. 
	\end{align*}
	But we can reconstruct equalizers and coequalizers from kernels and cokernels via
	\begin{align*}
		\Eq\Big(A\doublemorphism[\alpha][\beta]B\Big)=\ker\Big(A\xrightarrow{\alpha-\beta}B\Big)\quad\text{and}\quad \Coeq\Big(A\doublemorphism[\alpha][\beta]B\Big)=\coker\Big(A\xrightarrow{\alpha-\beta}B\Big)
	\end{align*}
	(the minus here is the one obtained from additivity of $\Aa$).
	
	\begin{defi}\lbl{def:EffectiveMono}
		A morphism $A\morphism[i]B$ is an \defemph{effective monomorphism}, if the following equivalent conditions hold.
		\begin{alphanumerate}
			\item (In any category) We have a bijection
			\begin{align*}
			\Hom_\Aa(T,A)&\isomorphism\left\{f\in\Hom_\Aa(T,B)\st 
			\begin{array}{c}
			\alpha f=\beta f\text{ if }B\doublemorphism[\alpha][\beta]S\text{ is any pair of}\\ 
			\text{morphisms such that }\alpha i=\beta i
			\end{array}
			\right\}\\
			t\in\Hom_\Aa(T,A) &\longmapsto f=it\;.
			\end{align*}
			\item (If the category has finite colimits) $i$ is an equalizer of something.
			\item (In additive categories with kernels and cokernels) $i$ is the kernel of an appropriate morphism.
			\item (In additive categories with kernels and cokernels) $i$ is the kernel of its cokernel.
		\end{alphanumerate}
	\end{defi}
	\begin{varthm}{defi}\lbl{def:EffectiveEpi}
		Dually, $A\morphism[p]B$ is an \defemph{effective epimorphism} if the following equivalent conditions hold.
		\begin{alphanumerate}
			\item (In any category) We have a bijection
			\begin{align*}
			\Hom_\Aa(B,T)&\isomorphism\left\{f\in\Hom_\Aa(A,T)\st 
			\begin{array}{c}
			f\alpha =f\beta\text{ if }S\doublemorphism[\alpha][\beta]A\text{ is any pair of}\\
			\text{morphisms such that }p\alpha =p\beta 
			\end{array}
			\right\}\\
			t\in\Hom_\Aa(B,T) &\longmapsto f=tp\;.
			\end{align*}
			\item (If the category has finite limits) $p$ is a coequalizer of something.
			\item (In additive categories with kernels and cokernels) $p$ is the cokernel of an appropriate morphism.
			\item (In additive categories with kernels and cokernels) $p$ is the cokernel of its kernel.
			\item $B^\op\morphism[p^\op]A^\op$ is an effective monomorphism in the dual category $\Aa^\op$.
		\end{alphanumerate}
	\end{varthm}
	In any category, a morphism which is mono and effectively epi (or epi and effectively mono) is an isomorphism, but there are examples of morphisms which are simultaneously mono and epi but not an isomorphism (e.g.\ $\IZ\monomorphism\IQ$ in the category of rings). This needs to be ruled out by a definition, and that's what is happening now! 
\end{rem}
\begin{defi}
	A category $\Aa$ is \defemph{abelian}, if it is additive, has kernels and cokernels and such that every monomorphism is effectively mono, every epimorphism is effectively epi, and (thus) any morphism which is both a mono- and an epimorphism is an isomorphism.
\end{defi}
\begin{rem*}
	\begin{alphanumerate}
		\item The three conditions on mono- and epimorphisms are not independent. The last condition, i.e.\ that every morphism which is both a mono- and an epimorphism is an isomorphism, follows from either of the former two.
		\item Since equalizers and coequalizers in an abelian category $\Aa$ can be constructed from kernels and cokernels (cf.\ Remark~\reff{rem:KernelCokernel}) and we already have finite products and coproducts from additivity of $\Aa$, we deduce that $\Aa$ has arbitrary finite limits and colimits. Indeed, we proved on exercise sheet \#7 from Algebraic Geometry I that finite limits can be constructed from equalizers and finite products, and, given coequalizers and finite coproducts instead, it's just the same for finite colimits.
		
		Conversely, the existence of finite limits and colimits guarantees that $\Aa$ has equalizers, coequalizers, finite products, and finite products, all of them being special cases of finite limits and colimits.
	\end{alphanumerate}
	
\end{rem*}
The category of modules (over a ring $R$) or sheaves of modules are abelian categories (as we are going to prove in a moment), but not Banach spaces or projective modules over most rings.
\begin{prop}\lbl{prop:RmodAbelian}
	The category $\Rr\cat{-Mod}$ of sheaves of modules (over a sheaf of rings $\Rr$ on some topological space $X$) is abelian.
\end{prop}
For clarity (and to better distinguish between the proof and Professor Franke's remarks about it), we will chop the proof into some lemmas.
\begin{lem}
	The category $\Rr\cat{-Mod}$ is additive.
\end{lem}
\begin{proof}
	First note that the zero sheaf $0$ is a common initial and final object. A direct sum of $\Mm,\Nn\in\Ob(\Rr\cat{-Mod})$ is given by
	\begin{align*}
	(\Mm\oplus\Nn)(U)=\left\{(m,n)\st m\in\Mm(U), n\in\Nn(U)\right\}\quad\text{for all }U\subseteq X\text{ open}
	\end{align*}
	(it's clear that this is a presheaf and it inherits the sheaf axiom from $\Aa$ and $\Nn$) with component-wise module operations and with $\Mm\lmorphism[p]\Mm\oplus\Nn\morphism[q]\Nn$ and $\Mm\morphism[i]\Mm\oplus\Nn\lmorphism[j]\Nn$ given by $p(m,n)=m$, $q(m,n)=n$, $i(m)=(m,0)$, and $j(n)=(0,n)$ on open subsets $U\subseteq X$ and $m\in\Mm(U)$, $n\in\Nn(U)$.
	
	If $\Mm\morphism[\mu]\Tt\lmorphism[\nu]\Nn$ are given, $\Mm\oplus\Nn\morphism[\mu\amalg\nu]\Tt$ sending $(m,n)\in(\Mm\oplus\Nn)(U)$ to $\mu(m)+\nu(n)$ verifies the universal property of the coproduct for $\Mm\oplus\Nn$. Similarly, $\Tt\morphism[\mu\times\nu]\Mm\oplus\Nn$ given by $(\mu\times\nu)(t)=(\mu(t),\nu(t))$ for $t\in\Tt(U)$ confirms the universal property of the product for $\Mm\oplus\Nn$. Also, $c=\id_{\Mm\oplus\Nn}$ is the unique endomorphism $c$ of that object such that $pci=\id_\Mm$, $qcj=\id_\Nn$, $pcj=0$, and $qci=0$. Thus, $\Rr\cat{-Mod}$ is additive (the group structure on $\Hom$ sets being easily verified).
\end{proof}
\begin{lem}\lbl{lem:RModHasKernels}
	The category $\Rr\cat{-Mod}$ has kernels.
\end{lem}
\begin{proof}
	Let $\Mm\morphism[f]\Nn$ be a morphism of sheaves of $\Rr$-modules and $\Kk$ be the sheaf given by 
	\begin{align*}
		\Kk(U)=\ker\Big(\Mm\morphism[f]\Nn\Big)(U)\coloneqq\ker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)
	\end{align*}
	(you should convince yourself that this indeed satisfies the sheaf axiom). Then the inclusion $\Kk\morphism[\kappa]\Mm$ is a monomorphism as $\Kk(U)\monomorphism\Mm(U)$ is injective for every open subset $U\subseteq X$. 
	
	If $\Tt\morphism[\tau]\Mm$ is a morphism of $\Rr$-modules such that $f\tau=0$, then, for every $t\in\Tt(U)$, we have $f(\tau(t))=0$, hence $\snake{\tau}(t)\coloneqq\tau(t)\in\ker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)=\Kk(U)$ and $\tau$ factors over 
	\begin{diagram*}
		\node[ob](R) at (0,1.25) {$\Tt$};
		\node[ob](A) at (2.5,1.25) {$\Mm$};
		\node[ob](RS) at (1.25,0) {$\Kk$};
		\scriptsize
		\draw[->] (R) -- (A) node[pos=0.5, above] {$\tau$};
		\draw[->, dashed] (R) -- (RS) node[pos=0.5, below left] {$\exists!\ \snake\tau$};
		\draw[right hook->] (RS) -- (A) node[pos=0.5, below right] {$\kappa$};
	\end{diagram*}
	This proves that $\Kk$ is indeed a kernel of $f$ in the category $\Rr\cat{-Mod}$.
\end{proof}
\begin{rem}
	\begin{alphanumerate}
		\item \lbl{rem:SheafMonomorphism}It is a consequence of the exactness of the $\colimit$ functor (for filtered systems of abelian groups; exactness of $\colimit$ does \emph{not} hold in general, not even for filtered colimits in abelian categories), that 
		\begin{align*}
		\Kk_x=\colimit[U\ni x]\ker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)\simeq\ker\Big(\Mm_x\morphism[f]\Nn_x\Big)\;.
		\end{align*}
		This isomorphism can also be seen in a straightforward way.
		
		\item One may check that in any additive category (with kernels), a morphism $i$ is a monomorphism iff $\ker(i)=0$. Thus, in our example we have the equivalent conditions
		\begin{alphanumerate}
			\item[\itememph{\alpha}] $\Mm\morphism[f]\Nn$ is a monomorphism.
			\item[\itememph{\beta}] $\Mm(U)\morphism[f]\Nn(U)$ is injective for all open subsets $U\subseteq X$.
			\item[\itememph{\gamma}] $\ker(f)=0$ (the zero sheaf).
			\item[\itememph{\delta}] $\Mm_x\morphism[f]\Nn_x$ is injective for all $x\in X$.
		\end{alphanumerate}
	\end{alphanumerate}
	The construction of cokernels won't be that straightforward (duh!), related to the fact that epimorphisms in categories of sheaves aren't as simple as you might think. If $\Gg$ and $\Hh$ are sheaves on some topological space $X$ and $f$ is a morphism between them such that $\Gg(U)\morphism[f]\Hh(U)$ is surjective for all open $U$, then $f$ is an epimorphism, but there are epimorphisms $f$ for which this fails. 
	
	However, it follows from the fact that a sheaf $\Gg$ is canonically isomorphic to its sheafification $\Gg^\sh$ (cf. \cite[Proposition~1.2.1\itememph{d}]{alggeo1}) that a morphism between sheaves (of sets, groups, \ldots) is uniquely determined by the maps it induces on stalks. Thus, $\Gg\morphism\Hh$ is an epimorphism if $\Gg_x\morphism\Hh_x$ is an epimorphism in the respective target category for all $x\in X$.
\end{rem}
\begin{lem}\lbl{lem:RmodHasCokernels}
	The category $\Rr\cat{-Mod}$ has cokernels.
\end{lem}
\begin{proof}
	For a morphism $\Mm\morphism[f]\Nn$ of sheaves of $\Rr$-modules, the map 
	\begin{align*}
		U\mapsto \coker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)=\Mm(U)/\Nn(U)\quad\text{for }U\subseteq X\text{ open}
	\end{align*}
	defines a presheaf $\Ff$ of $\Rr$-modules, but in general, $\Ff$ will fail to be a sheaf. We put $\Cc=\Ff^\sh$ (the \emph{sheafification} of $\Ff$, cf. \cite[Definition~1.2.3]{alggeo1}) and claim that $\Nn\morphism\Cc$ is a cokernel of $f$.
	
	Our first goal is to show that
	\begin{align}\lbl{eq:SheafCokernel}
		\Cc_x\simeq\coker\Big(\Mm_x\morphism[f]\Nn_x\Big)\;.\tag{$*$}
	\end{align}
	In the lecture, we did a direct proof, which was somewhat ugly and (in my opinion) lacking the essential step. From \cite[Proposition~1.2.1\itememph{a}]{alggeo1}, we get that $\Cc_x\simeq\Ff_x$ (which is basically what we proved in the lecture for this particular special case), so we need to show that
	\begin{align*}
		\Ff_x=\colimit[U\ni x]\coker\Big(\Mm(U)\morphism[f]\Nn(U)\Big)\simeq \coker\Big(\Mm_x\morphism[f]\Nn_x\Big)\;.
	\end{align*}
	Since $\Mm_x=\colimit[U\ni x]\Mm(U)$ and similar for $\Nn_x$, this amounts to showing that cokernels and certain colimits commute. But by Remark~\reff{rem:KernelCokernel}, cokernels are just a special case of colimits, so what we are actually going to show is that colimits commute with colimits -- in the following sense.
	\begin{lem}\lbl{lem:ColimitsCommute}
		Let $(X_{i,j})_{i\in I,j\in J}$ be objects of a category $\Aa$. For each $i_1,i_2\in I$ let there be an indexing set $I_{i_1,i_2}$ and for each $\alpha\in I_{i_1,i_2}$ and $j\in J$ a morphism
		\begin{align*}
			f_\alpha^j\colon X_{i_1,j}\morphism X_{i_2,j}\;.
		\end{align*}
		Similarly, for each $j_1,j_2\in J$ let there be an indexing set $J_{j_1,j_2}$ and for each $\beta\in J_{j_1,j_2}$ and $i\in I$ a morphism
		\begin{align*}
			g_\beta^i\colon X_{i,j_1}\morphism X_{i,j_2}\;.
		\end{align*}
		Moreover, suppose that for each $i_1,i_2\in I$ and $j_1,j_2\in J$ and $\alpha\in I_{i_1,i_2}$ and $\beta\in J_{j_1,j_2}$ the diagram
		\begin{diagram}[baseline=0cm-0.5ex][\lbl{diag:CokernelsCommute}]
			\node[ob] (a) at (0,0.75) {$X_{i_1,j_1}$};
			\node[ob] (b) at (0,-0.75) {$X_{i_1,j_2}$};
			\node[ob] (c) at (2.5,0.75) {$X_{i_2,j_1}$};
			\node[ob] (d) at (2.5,-0.75) {$X_{i_2,j_2}$};
			\scriptsize
			\draw[->] (a) -- (b) node[pos=0.5,left] {$g_\beta^{i_1}$};
			\draw[->] (a) -- (c) node[pos=0.5,above] {$f_\alpha^{j_1}$};
			\draw[->] (c) -- (d) node[pos=0.5,right] {$g_\beta^{i_2}$};
			\draw[->] (b) -- (d) node[pos=0.5,above] {$f_\alpha^{j_2}$};
			\tag{\#}
		\end{diagram}
		commutes. Then there is an isomorphism
		\begin{align*}
			\colimit[i\in I]\colimit[j\in J]X_{i,j}\simeq\colimit[j\in J]\colimit[i\in I]X_{i,j}\simeq\colimit[(i,j)\in I\times J]X_{i,j}\;.
		\end{align*}
	\end{lem}
	\begin{proof}[Proof of Lemma~\reff{lem:ColimitsCommute}]
		Clearly, it is enough to show the rightmost isomorphism. What we need to show is that $L\coloneqq\colimit[j]\colimit[i]X_{i,j}$ satisfies the universal property of $L'\coloneqq\colimit[(i,j)]X_{i,j}$.
		
		 Let $T$ be an object of $\Aa$ and $\big(X_{i,j}\morphism[\tau_{i,j}]T\big)_{i\in I,j\in J}$ be a cocone below the diagram $(X_{i,j})_{i,j}$. That is, for every $\alpha\in I_{i_1,i_2}$ and $j\in J$ the diagram 
		\begin{diagram*}
			\node[ob](R) at (0,1.25) {$X_{i_1,j}$};
			\node[ob](A) at (2.5,1.25) {$X_{i_2,j}$};
			\node[ob](RS) at (1.25,0) {$T$};
			\scriptsize
			\draw[->] (R) -- (A) node[pos=0.5, above] {$f_\alpha^j$};
			\draw[->] (R) -- (RS) node[pos=0.5, below left] {$\tau_{i_1,j}$};
			\draw[<-] (RS) -- (A) node[pos=0.5, below right] {$\tau_{i_2,j}$};
		\end{diagram*}
		commutes. By the universal properties of the $L_j\coloneqq\smash{\colimit[i]X_{i,j}}$, the $\tau_{i,j}$ factor over some maps $L_j\morphism[\tau_j]T$. Moreover, for each $j_1,j_2\in J$ and $\beta\in J_{j_1,j_2}$, the compositions 
		\begin{align*}
			X_{i,j_1}\morphism[g_\beta^i]X_{i,j_2}\morphism L_{j_2}
		\end{align*}
		induce a map $L_{j_1}\morphism[g_\beta]L_{j_2}$ by the universal property of $L_{j_1}$ (here, we silently used the commutativity of \eqreff{diag:CokernelsCommute}, otherwise the above compositions wouldn't be a cocone below $(X_{i,j_1})_{i\in I}$). We thus get a diagram
		\begin{diagram*}
			\node[ob](x1) at (0,3) {$X_{i,j_1}$};
			\node[ob](x2) at (5,3) {$X_{i,j_2}$};
			\node[ob](l1) at (1.25,1.5) {$L_{j_1}$};
			\node[ob](l2) at (3.75,1.5) {$L_{j_2}$};
			\node[ob](t) at (2.5,0) {$T$};
			\scriptsize
			\draw[->] (x1) -- (x2) node[pos=0.5, above] {$g_\beta^i$};
			\draw[dashed,->] (l1) -- (l2) node[pos=0.5, above] {$g_\beta$};
			\draw[->] (x1) -- (l1);
			\draw[->] (x2) -- (l2);
			\draw[->, bend right=45] (x1) to node[pos=0.5, below left] {$\tau_{i,j_1}$} (t);
			\draw[->, bend left=45] (x2) to node[pos=0.5, below right] {$\tau_{i,j_2}$} (t);
			\draw[->] (l1) -- (t) node[pos=0.5, below left] {$\tau_{j_1}$};
			\draw[->] (l2) -- (t) node[pos=0.5, below right] {$\tau_{j_2}$};
		\end{diagram*}
	in which everything but the bottom-middle triangle commutes. We show that this triangle commutes as well. Indeed, by the universal property of $L_{j_1}$, $\tau_{j_1}$ is the unique morphism $L_{j_1}\morphism T$ making each
	\begin{diagram*}
		\node[ob](R) at (0,1.25) {$X_{i,j_1}$};
		\node[ob](A) at (2.5,1.25) {$L_{j_1}$};
		\node[ob](RS) at (1.25,0) {$T$};
		\scriptsize
		\draw[->] (R) -- (A);
		\draw[->] (R) -- (RS) node[pos=0.5, below left] {$\tau_{i,j_1}$};
		\draw[<-] (RS) -- (A);
	\end{diagram*}
	commute. But apparently, $\tau_{j_2}g_\beta$ has this property as well, proving $\tau_{j_1}=\tau_{j_2}g_\beta$. Then the morphisms $\big(L_{j}\morphism[\tau_j]T\big)_{j\in J}$ form a cocone below the diagram $(L_j)_{j\in J}$, hence factor uniquely over some $L\morphism[\tau]T$ by the universal property of $L$.	
	
	It remains to prove uniqueness of $\tau$. If $L\morphism[\tau]T$ is a morphism over which each $X_{i,j}\morphism[\tau_{i,j}]T$ factors, then the composition $L_j\morphism L\morphism[\tau]T$ must equal $\tau_j$ since $\tau_j$ is uniquely determined by the universal property of $L_j$. But $\tau$ is uniquely determined by the $\tau_j$, proving uniqueness.
\end{proof}
	Having thus proved \eqreff{eq:SheafCokernel}, we now proceed with the proof of Lemma~\reff{lem:RmodHasCokernels}. We have a morphism $\Nn\morphism\Cc$ sending $n\in \Nn(U)$ to
	\begin{align*}
	\bigg(\text{image of }n\text{ under }\Nn(U)\morphism\Nn_x\morphism\coker\Big(\Mm_x\morphism[f]\Nn_x\Big)\bigg)_{x\in U}\;.
	\end{align*}
	Since $\Cc_x\simeq\coker\Big(\Mm_x\morphism[f]\Nn_x\Big)$, this morphism $\Nn\morphism\Cc$ induces surjections on stalks, hence is an epimorphism of sheaves. We show that the morphism $\Nn\morphism\Cc$ satisfies the universal property of the cokernel.
	
	Let $\Nn\morphism[\tau]\Tt$ be a morphism of sheaves of $\Rr$-modules such that $\tau f=0$. Let $U\subseteq X$ be open. For 
	\begin{align*}
		\nu=(\nu_x)_{x\in U}\in\Cc(U)\subseteq\prod_{x\in U}\coker\Big(\Mm_x\morphism[f]\Nn_x\Big)
	\end{align*}
	we define $\tau_1(\nu)\in\prod_{x\in U}\Tt_x$ by selecting $n\in\Nn_x$ whose image in $\coker\Big(\Mm_x\morphism[f]\Nn_x\Big)$ equals $\nu_x$, then put $\tau_1(\nu)_x=\tau(n)_x$ which is independent of the choice of $n$ as $\tau f=0$. It follows from the coherence condition for $\Cc$ that $\tau_1(\nu)$ satisfies the coherence condition for $\Tt^\sh$, i.e.\ $\tau_1(\nu)\in\Tt^\sh(U)\subseteq\prod_{x\in U}\Tt_x$. Hence there is $\Cc\morphism[\tau_2]\Tt$ such that $\tau_1=\Big(\Tt\isomorphism\Tt^\sh\Big)\circ\tau_2$ and $\tau_2$ makes
	\begin{diagram*}
		\node[ob](R) at (0,1.25) {$\Nn$};
		\node[ob](A) at (2.5,1.25) {$\Tt$};
		\node[ob](RS) at (1.25,0) {$\Cc$};
		\scriptsize
		\draw[->] (R) -- (A) node[pos=0.5, above] {$\tau$};
		\draw[->, dashed] (R) -- (RS) node[pos=0.5, below left] {$\exists!\ \tau_2$};
		\draw[->] (RS) -- (A);
	\end{diagram*}
	commutative. Uniqueness of $\tau_2$ is easy to see stalk-wise. It follows that $\Nn\morphism\Cc$ is ineed a cokernel of $f$.
\end{proof}
\begin{rem}\lbl{rem:SheafEpimorphism}
	One may check that in any additive category (with cokernels) a morphism $f$ is an epimorphism if $\coker(f)=0$. By our previous construction of cokernels and the description of stalks, we have equivalent conditions
	\begin{alphanumerate}
		\item $\Mm\morphism[f]\Nn$ is an epimorphism of sheaves of $\Rr$-modules.
		\item $\Mm_x\morphism[f]\Nn_x$ is surjective for all $x\in X$.
		\item For every open $U\subseteq X$ and $n\in\Nn(U)$ there are an open covering $U=\bigcup_{\lambda\in\Lambda}U_\lambda$ and $m_\lambda\in\Mm(U_\lambda)$ such that $n|_{U_\lambda}=f(m_\lambda)$
	\end{alphanumerate}
	\ldots but \itememph{c} does \emph{not} imply the surjectivity of $\Mm(U)\morphism[f]\Nn(U)$, unless, e.g., $f$ is also a monomorphism.
\end{rem}
\begin{proof}[Proof of Proposition~\reff{prop:RmodAbelian}]
	We verify the rest of the abelianness conditions. First, let $\Mm\morphism[f]\Nn$ be a mono- and epimorphism. Then it induces isomorphisms on stalks (by Remark~\reff{rem:SheafMonomorphism}\itememph{b} and Remark~\reff{rem:SheafEpimorphism}), hence is an isomorphism itself.
	
	Let $\Mm\morphism[i]\Nn$ be a monomorphism and $\Nn\morphism\Cc$ be its cokernel. Then 
	\begin{align*}
		\ker\left(\Nn\morphism\Cc\right)_x=\ker\left(\Nn_x\morphism\Cc_x\right)=\ker\left(\Nn_x\morphism\coker\Big(\Mm_x\morphism[i]\Nn_x\Big)\right)\simeq\Mm_x
	\end{align*}
	as $\Mm_x\morphism[i]\Nn_x$ is injective. Hence $\Mm\morphism\ker\left(\Nn\morphism\Cc\right)$ induces isomorphisms on stalks and thus is an isomorphism itself. It follows by Definition~\reff{def:EffectiveMono}\itememph{d} that any monomorphism is an effective monomorphism.
	
	Similar arguments apply to epimorphisms.	
\end{proof}
Recall the definition of an adjoint pair of functors.
\begin{defi}[{\cite[Definition~A.2.3]{alggeo1}}]\lbl{def:AdjointFunctors}
	Let $\Aa,\Bb$ be categories. A pair $\Aa\doublelrmorphism[L][R]\Bb$ of (covariant) functors is called \defemph{adjoint}, if there is a canonical bijection
	\begin{align*}
		\Hom_\Aa(X,RY)\isomorphism\Hom_\Bb(LX,Y)
	\end{align*}
	which is functorial in both $X\in\Ob(\Aa)$ and $Y\in\Ob(\Bb)$.
\end{defi}
\begin{rem}\lbl{rem:AdjunctionPreservesStuff}
	It can be easily seen that $L$ preserves colimits (in particular, coproducts, and in particular again, initial objects) and $R$ preserves limits (in particular, products, and in particular again, final objects). When $\Aa$ and $\Bb$ are additive, it follows that both $L$ and $R$ map $0$ to $0$ and are compatible with finite direct sums. Moreover, $L$ preserves cokernels and $R$ preserves kernels since these are special cases of colimits and limits, respectively (in particular, I have no idea what the purpose of Franke's extra calculation was).%We don't need this.%Because of
	%\begin{align*}
	%	\Hom_\Aa\left(T,R\Big[\ker\Big(X\morphism[f]Y\Big)\Big]\right)&\simeq \Hom_\Bb\left(LT,\ker\Big(X\morphism[f]Y\Big)\right)\\
	%	&\simeq\ker\left(\Hom_\Bb(LT,X)\morphism[f\circ]\Hom_\Bb(LT,Y)\right)\\
	%	&\simeq\ker\left(\Hom_\Aa(T,RX)\morphism[Rf\circ]\Hom_\Aa(T,RY)\right)\\
	%	&\simeq\Hom_\Aa\left(T,\ker\Big(RX\morphism[Rf]RY\Big)\right)\;,
	%\end{align*}
\end{rem}

\printbibliography

\end{document}          
